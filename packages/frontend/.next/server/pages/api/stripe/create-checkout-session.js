"use strict";(()=>{var e={};e.id=4324,e.ids=[4324],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},36090:e=>{e.exports=import("stripe")},92442:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>d,default:()=>u,routeModule:()=>l});var a=r(9150),i=r(81631),n=r(76835),o=r(37990),c=e([o]);o=(c.then?(await c)():c)[0];let u=(0,n.l)(o,"default"),d=(0,n.l)(o,"config"),l=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/stripe/create-checkout-session",pathname:"/api/stripe/create-checkout-session",bundlePath:"",filename:""},userland:o});s()}catch(e){s(e)}})},37990:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>handler});var a=r(36090),i=e([a]);a=(i.then?(await i)():i)[0];let n=new a.default(process.env.STRIPE_SECRET_KEY,{apiVersion:"2022-11-15"});async function handler(e,t){if("POST"!==e.method)return t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed");try{let r=e.headers.authorization;if(!r)return t.status(401).json({error:"Unauthorized: Missing token"});let{priceId:s,customerId:a}=e.body;if(!s)return t.status(400).json({error:"Price ID is required"});let i={mode:"subscription",payment_method_types:["card"],line_items:[{price:s,quantity:1}],success_url:"http://192.168.29.17:3000/dashboard?session_id={CHECKOUT_SESSION_ID}",cancel_url:"http://192.168.29.17:3000/pricing"};a&&(i.customer=a);let o=await n.checkout.sessions.create(i);return t.status(200).json({sessionId:o.id})}catch(e){return t.status(500).json({error:"An error occurred while creating checkout session"})}}s()}catch(e){s(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[4467,4470,7404,5717,9008,7355,7928,1065,8938,5323,7378,5246,5675,8510,8424,4657,8592],()=>__webpack_exec__(92442));module.exports=r})();