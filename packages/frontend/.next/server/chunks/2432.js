"use strict";exports.id=2432,exports.ids=[2432],exports.modules={87561:(e,a,s)=>{s.d(a,{y:()=>ProfessionalForm});var n=s(20997),l=s(15166),i=s.n(l),t=s(92773),r=s.n(t),o=s(22741),d=s.n(o),c=s(53817),h=s.n(c),u=s(1579),m=s.n(u),f=s(76072),p=s.n(f),g=s(28277),x=s.n(g),v=s(36293),N=s.n(v),j=s(31595),b=s.n(j),C=s(16689);let ProfessionalForm=({open:e,onClose:a,onSubmit:s,professional:l})=>{let[t,o]=(0,C.useState)({email:"",password:"",firstName:"",lastName:"",professionalType:"chartered_accountant",firmName:"",professionalLicenseNumber:"",address:"",phone:"",isActive:!0,tenants:[],permissions:{canFileGST:!1,canViewAllInvoices:!1,canManageVendors:!1,canApproveInvoices:!1,canAccessReports:!1,canManageUsers:!1}});(0,C.useEffect)(()=>{l?o(l):o({email:"",password:"",firstName:"",lastName:"",professionalType:"chartered_accountant",firmName:"",professionalLicenseNumber:"",address:"",phone:"",isActive:!0,tenants:[],permissions:{canFileGST:!1,canViewAllInvoices:!1,canManageVendors:!1,canApproveInvoices:!1,canAccessReports:!1,canManageUsers:!1}})},[l]);let handleChange=e=>{o({...t,[e.target.name]:e.target.value})};return(0,n.jsxs)(i(),{open:e,onClose:a,fullWidth:!0,maxWidth:"sm",children:[n.jsx(r(),{children:l?"Edit Professional":"Add Professional"}),n.jsx(d(),{children:(0,n.jsxs)(h(),{display:"flex",flexDirection:"column",gap:2,mt:1,children:[n.jsx(m(),{label:"Email",name:"email",value:t.email,onChange:handleChange,required:!0,fullWidth:!0}),!l&&n.jsx(m(),{label:"Password",name:"password",type:"password",value:t.password,onChange:handleChange,required:!0,fullWidth:!0}),n.jsx(m(),{label:"First Name",name:"firstName",value:t.firstName,onChange:handleChange,required:!0,fullWidth:!0}),n.jsx(m(),{label:"Last Name",name:"lastName",value:t.lastName,onChange:handleChange,required:!0,fullWidth:!0}),(0,n.jsxs)(m(),{select:!0,label:"Professional Type",name:"professionalType",value:t.professionalType,onChange:handleChange,fullWidth:!0,children:[n.jsx(p(),{value:"ca",children:"Chartered Accountant"}),n.jsx(p(),{value:"accountant",children:"Accountant"}),n.jsx(p(),{value:"consultant",children:"Tax Consultant"}),n.jsx(p(),{value:"other",children:"Other"})]}),n.jsx(m(),{label:"Firm Name",name:"firmName",value:t.firmName||"",onChange:handleChange,fullWidth:!0}),n.jsx(m(),{label:"License Number",name:"professionalLicenseNumber",value:t.professionalLicenseNumber||"",onChange:handleChange,fullWidth:!0}),n.jsx(m(),{label:"Phone",name:"phone",value:t.phone||"",onChange:handleChange,fullWidth:!0}),n.jsx(m(),{label:"Address",name:"address",value:t.address||"",onChange:handleChange,fullWidth:!0}),n.jsx(x(),{control:n.jsx(N(),{checked:t.isActive,onChange:e=>o({...t,isActive:e.target.checked})}),label:"Active"}),n.jsx(b(),{variant:"contained",onClick:()=>{if(!t.email||!t.firstName||!t.lastName){alert("Email, First Name, and Last Name are required");return}s(t)},children:l?"Update Professional":"Add Professional"})]})})]})}},62432:(e,a,s)=>{s.a(e,async(e,n)=>{try{s.r(a),s.d(a,{ProfessionalsDashboard:()=>ProfessionalsDashboard});var l=s(20997),i=s(16689),t=s(53817),r=s.n(t),o=s(9618),d=s.n(o),c=s(34892),h=s.n(c),u=s(31595),m=s.n(u),f=s(74699),p=s.n(f),g=s(51876),x=s.n(g),v=s(95775),N=s(87561),j=s(37270),b=s(52849),C=e([j]);j=(C.then?(await C)():C)[0];let ProfessionalsDashboard=()=>{let{get:e,post:a,put:s,patch:n}=(0,v.h)(),[t,o]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[f,g]=(0,i.useState)(null),[C,y]=(0,i.useState)(!1),[A,P]=(0,i.useState)(null),fetchProfessionals=async()=>{u(!0);try{let a=await e("/api/super-admin/professionals");o(a.data||[])}catch(e){g(e.message||"Failed to fetch professionals")}finally{u(!1)}};(0,i.useEffect)(()=>{fetchProfessionals()},[]);let handleEdit=e=>{let a={...e,email:e.user?.email||"",firstName:e.user?.firstName||"",lastName:e.user?.lastName||""};P(a),y(!0)},handleStatusChange=async e=>{try{let a=!e.isActive;await n(`/api/super-admin/professionals/${e.id}/${e.userId}/status`,{isActive:a}),j.toast.success("Status updated successfully"),fetchProfessionals()}catch(e){alert(e.message||"Failed to change status")}},handleSubmit=async e=>{try{A?(await s(`/api/super-admin/professionals/${A.id}`,e),j.toast.success("Professional user updated successfully")):(await a("/api/super-admin/professionals",e),j.toast.success("Professional user created successfully")),y(!1),fetchProfessionals()}catch(e){alert(e.message||"Failed to save professional")}};return(0,l.jsxs)(r(),{component:d(),sx:{p:3,borderRadius:2},children:[(0,l.jsxs)(r(),{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[l.jsx(h(),{variant:"h6",children:"Professionals Management"}),l.jsx(m(),{variant:"contained",onClick:()=>{P(null),y(!0)},children:"Add Professional"})]}),c&&(0,l.jsxs)(r(),{textAlign:"center",py:5,children:[l.jsx(p(),{}),l.jsx(h(),{mt:2,children:"Loading professionals..."})]}),f&&l.jsx(x(),{severity:"error",children:f}),!c&&t.length>0&&l.jsx(b.w,{title:"Professionals",resource:"professionals",data:t,columns:[{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"email",label:"Email"},{id:"firmName",label:"Firm Name"},{id:"professionalType",label:"Type"},{id:"isActive",label:"Status",format:e=>e.isActive?"Active":"Inactive"}],onEdit:e=>{let a=t.find(a=>a.id===e);a&&handleEdit(a)},onStatusChange:e=>{let a=t.find(a=>a.id===e);a&&handleStatusChange(a)}}),l.jsx(N.y,{open:C,onClose:()=>y(!1),onSubmit:handleSubmit,professional:A})]})};n()}catch(e){n(e)}})}};