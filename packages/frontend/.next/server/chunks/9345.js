"use strict";exports.id=9345,exports.ids=[9345],exports.modules={42179:(e,a,n)=>{n.d(a,{i:()=>TenantForm});var t=n(20997),s=n(15166),i=n.n(s),l=n(92773),d=n.n(l),u=n(22741),r=n.n(u),c=n(53817),h=n.n(c),o=n(1579),m=n.n(o),b=n(31595),g=n.n(b),x=n(16689);let TenantForm=({open:e,onClose:a,onSubmit:n,tenant:s})=>{let[l,u]=(0,x.useState)({name:"",businessName:"",subdomain:"",slug:"",isActive:!0});(0,x.useEffect)(()=>{s?u(s):u({name:"",businessName:"",subdomain:"",slug:"",isActive:!0})},[s]);let handleChange=e=>{u({...l,[e.target.name]:e.target.value})};return(0,t.jsxs)(i(),{open:e,onClose:a,fullWidth:!0,maxWidth:"sm",children:[t.jsx(d(),{children:s?"Edit Tenant":"Add Tenant"}),t.jsx(r(),{children:(0,t.jsxs)(h(),{display:"flex",flexDirection:"column",gap:2,mt:1,children:[t.jsx(m(),{label:"Tenant Name",name:"name",value:l.name,onChange:handleChange,required:!0,fullWidth:!0}),t.jsx(m(),{label:"Business Name",name:"businessName",value:l.businessName,onChange:handleChange,fullWidth:!0}),t.jsx(m(),{label:"Subdomain",name:"subdomain",value:l.subdomain,onChange:handleChange,required:!0,fullWidth:!0}),t.jsx(m(),{label:"Slug",name:"slug",value:l.slug||"",onChange:handleChange,fullWidth:!0}),t.jsx(g(),{variant:"contained",onClick:()=>{if(!l.name||!l.subdomain){alert("Name and Subdomain are required");return}n(l)},children:s?"Update Tenant":"Add Tenant"})]})})]})}},99345:(e,a,n)=>{n.a(e,async(e,t)=>{try{n.r(a),n.d(a,{TenantsDashboard:()=>TenantsDashboard});var s=n(20997),i=n(16689),l=n(53817),d=n.n(l),u=n(9618),r=n.n(u),c=n(34892),h=n.n(c),o=n(31595),m=n.n(o),b=n(74699),g=n.n(b),x=n(51876),f=n.n(x),p=n(95775),j=n(42179),v=n(37270),T=n(52849),C=e([v]);v=(C.then?(await C)():C)[0];let TenantsDashboard=()=>{let{get:e,post:a,put:n,patch:t}=(0,p.h)(),[l,u]=(0,i.useState)([]),[c,o]=(0,i.useState)(!0),[b,x]=(0,i.useState)(null),[C,S]=(0,i.useState)(!1),[y,A]=(0,i.useState)(null),fetchTenants=async()=>{o(!0);try{let a=await e("/api/super-admin/tenants");u(a.data||[])}catch(e){x(e.message||"Failed to fetch tenants")}finally{o(!1)}};(0,i.useEffect)(()=>{fetchTenants()},[]);let handleEdit=e=>{A(e),S(!0)},handleStatusChange=async e=>{try{await t(`/api/super-admin/tenants/${e.id}/status`,{isActive:!e.isActive}),fetchTenants()}catch(e){alert(e.message||"Failed to change status")}},handleSubmit=async e=>{try{y?(await n(`/api/super-admin/tenants/${y.id}`,e),v.toast.success("Tenant updated successfully")):(await a("/api/super-admin/tenants",e),v.toast.success("Tenant created successfully")),S(!1),fetchTenants()}catch(e){alert(e.message||"Failed to save tenant")}};return(0,s.jsxs)(d(),{component:r(),sx:{p:3,borderRadius:2},children:[(0,s.jsxs)(d(),{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[s.jsx(h(),{variant:"h6",children:"Tenants Management"}),s.jsx(m(),{variant:"contained",onClick:()=>{A(null),S(!0)},children:"Add Tenant"})]}),c&&(0,s.jsxs)(d(),{textAlign:"center",py:5,children:[s.jsx(g(),{}),s.jsx(h(),{mt:2,children:"Loading tenants..."})]}),b&&s.jsx(f(),{severity:"error",children:b}),!c&&l.length>0&&s.jsx(T.w,{title:"Tenants",resource:"tenants",data:l,columns:[{id:"name",label:"Tenant Name"},{id:"businessName",label:"Business Name"},{id:"subdomain",label:"Subdomain"},{id:"isActive",label:"Status",format:e=>e.isActive?"Active":"Inactive"},{id:"createdAt",label:"Created At",format:e=>e.createdAt?new Date(e.createdAt).toLocaleDateString():"-"}],onEdit:e=>{let a=l.find(a=>a.id===e);a&&handleEdit(a)},onStatusChange:e=>{let a=l.find(a=>a.id===e);a&&handleStatusChange(a)}}),!c&&0===l.length&&s.jsx(h(),{children:"No tenants found."}),s.jsx(j.i,{open:C,onClose:()=>S(!1),onSubmit:handleSubmit,tenant:y})]})};t()}catch(e){t(e)}})}};