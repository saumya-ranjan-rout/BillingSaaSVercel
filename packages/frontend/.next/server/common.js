exports.id=8592,exports.ids=[8592],exports.modules={69195:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>c});var s=r(20997),n=r(16689),l=r.n(n),i=r(12472),o=r(79123),d=e([i,o]);[i,o]=d.then?(await d)():d;let c=6658==r.j?({children:e})=>{let[t,r]=l().useState(!1);return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100 relative",children:[s.jsx(o.Z,{isOpen:t,onClose:()=>r(!1)}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(i.Z,{onMenuClick:()=>r(!0)}),s.jsx("div",{className:"absolute inset-0 bg-center bg-no-repeat bg-contain pointer-events-none",style:{backgroundImage:"url('/logo.jfif')",opacity:.03}}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:e})]})]})}:null;a()}catch(e){a(e)}})},12472:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>g});var s=r(20997),n=r(16689);if(6658==r.j)var l=r(41924);if(6658==r.j)var i=r(57344);if(6658==r.j)var o=r(79067);var d=r(1505),c=r(78e3),u=r(5632),h=r(37270),m=r(95775),p=e([c,h]);[c,h]=p.then?(await p)():p;let g=6658==r.j?({onMenuClick:e})=>{let[t,r]=(0,n.useState)(!1),[a,p]=(0,n.useState)(null),[g,x]=(0,n.useState)(null),y=(0,d.TL)();(0,u.useRouter)();let{get:f}=(0,m.h)(),handleLogout=async()=>{y((0,c.kS)()),window.location.href="/auth/login"};(0,n.useEffect)(()=>{let fetchUser=async()=>{try{let e=await f("/api/auth/mewithtenant");p(e.user),x(e.tenant)}catch(e){}};fetchUser()},[]);let viewBusiness=async(e,t)=>{if(confirm("Are you sure you want to switch tenant?"))try{let r=await f(`/api/customers/switchTenant/${e}/${t}`);y((0,c.Dj)({user:r.user,token:r.accessToken})),localStorage.setItem("token",r.accessToken),localStorage.setItem("user",JSON.stringify(r.user)),h.toast.success("Tenant switched successfully \uD83D\uDDD1️"),window.location.href="/app/dashboard"}catch(e){h.toast.error(e?.message||"Failed to switch tenant ❌")}};return s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("button",{onClick:e,className:"p-1 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 lg:hidden",children:s.jsx(l.Z,{size:24})}),s.jsx("div",{className:"relative ml-4 hidden md:block",children:a?.role==="professional_user"&&(0,s.jsxs)("p",{children:["You are viewing business of"," ",s.jsx("strong",{style:{backgroundColor:"red",padding:"2px 6px",color:"#fff",borderRadius:"4px"},children:g?.businessName}),s.jsx("button",{onClick:()=>viewBusiness(a?.id,"professional"),className:"ml-2 px-3 py-1 text-sm rounded-full bg-blue-600 text-white font-medium shadow hover:bg-blue-700 transition",children:"Return Back"})]})})]}),s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>r(e=>!e),children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:s.jsx(i.Z,{size:16})}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 hidden md:block",children:a?`${a.firstName} ${a.lastName}`:""})]}),t&&s.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:(0,s.jsxs)("button",{onClick:handleLogout,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[s.jsx(o.Z,{size:16}),s.jsx("span",{children:"Logout"})]})})]})})]})})}:null;a()}catch(e){a(e)}})},79123:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>S});var s=r(20997),n=r(16689),l=r(35491),i=r(38936),o=r(72914),d=r(76345),c=r(2656),u=r(70467),h=r(29832),m=r(57344);if(6658==r.j)var p=r(51203);var g=r(93571),x=r(5632),y=r(39097),f=r.n(y),v=r(96577),b=r.n(v),j=r(95775),w=e([g]);g=(w.then?(await w)():w)[0];let N=[{name:"Dashboard",href:"/app/dashboard",icon:l.Z},{name:"Users",href:"/app/users",icon:i.Z},{name:"Customers",href:"/app/customers",icon:i.Z},{name:"Vendors",href:"/app/vendors",icon:i.Z},{name:"Products",href:"/app/products",icon:o.Z},{name:"Purchases",href:"/app/purchases",icon:d.Z},{name:"Invoices",href:"/app/invoices",icon:d.Z},{name:"Billing",href:"/app/subscription",icon:c.Z},{name:"Loyalty",href:"/app/loyality",icon:u.Z},{name:"Reports",href:"/app/reports",icon:u.Z},{name:"Settings",href:"/app/settings",icon:h.Z},{name:"Request",href:"/app/professional-requests",icon:m.Z}],S=6658==r.j?({isOpen:e,onClose:t})=>{let r=(0,x.useRouter)(),[a,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(null),{get:d,patch:c}=(0,j.h)();(0,n.useEffect)(()=>{let fetchUser=async()=>{try{let e=await d("/api/auth/me");o(e.user)}catch(e){}};fetchUser()},[]);let u=N.filter(e=>i?.role!=="professional_user"||"Billing"!==e.name&&"Request"!==e.name),toggleMenu=e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsxs)(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden",onClick:t}),(0,s.jsxs)("div",{className:(0,g.cn)("fixed inset-y-0 left-0 z-30 w-64 bg-gray-900 transform transition duration-200 ease-in-out lg:static lg:inset-0 lg:translate-x-0",e?"translate-x-0":"-translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 bg-gray-800",children:[s.jsx("div",{className:"flex items-center",children:s.jsx(b(),{src:"/logo.png",alt:"Billing Software Logo",width:100,height:30,className:"rounded-md"})}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white lg:hidden",children:s.jsx(p.Z,{size:24})})]}),s.jsx("nav",{className:"mt-8",children:s.jsx("div",{className:"px-4 space-y-2",children:i?u.map(e=>{let t=e.href&&r.pathname===e.href;if(e.children){let t=a.includes(e.name);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>toggleMenu(e.name),className:(0,g.cn)("w-full flex items-center px-2 py-2 text-base font-medium rounded-md text-left",t?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[s.jsx(e.icon,{className:(0,g.cn)("mr-4 h-6 w-6",t?"text-white":"text-gray-400 group-hover:text-white")}),"Request"===e.name?i?.role==="admin"?"Request Professional":"Request Business":e.name]}),t&&s.jsx("div",{className:"ml-8 mt-2 space-y-1",children:e.children.map(e=>{let t=r.pathname===e.href;return s.jsx(f(),{href:e.href,className:(0,g.cn)("block px-2 py-1 text-sm rounded-md",t?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-800 hover:text-white"),children:e.name},e.name)})})]},e.name)}return(0,s.jsxs)(f(),{href:e.href,className:(0,g.cn)("group flex items-center px-2 py-2 text-base font-medium rounded-md",t?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[s.jsx(e.icon,{className:(0,g.cn)("mr-4 h-6 w-6",t?"text-white":"text-gray-400 group-hover:text-white")}),"Request"===e.name?i?.role==="admin"?"Request Professional":"Request Business":e.name]},e.name)}):s.jsx("div",{className:"text-gray-400 text-sm px-2",children:"Loading..."})})})]})]})}:null;a()}catch(e){a(e)}})},24299:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{PaymentForm:()=>PaymentForm});var s=r(20997),n=r(16689);if(6658==r.j)var l=r(98647),i=r.n(l);if(6658==r.j)var o=r(80075),d=r.n(o);if(6658==r.j)var c=r(34892),u=r.n(c);if(6658==r.j)var h=r(51876),m=r.n(h);if(6658==r.j)var p=r(53817),g=r.n(p);if(6658==r.j)var x=r(31595),y=r.n(x);var f=r(61863),v=e([f]);f=(v.then?(await v)():v)[0];let PaymentForm=({amount:e,onSubmit:t,isLoading:r=!1})=>{let a=(0,f.useStripe)(),l=(0,f.useElements)(),[o,c]=(0,n.useState)(null),handleSubmit=async e=>{if(e.preventDefault(),!a||!l)return;c(null);let r=l.getElement(f.CardElement);if(!r){c("Card element not found");return}let{error:s,paymentMethod:n}=await a.createPaymentMethod({type:"card",card:r});if(s){c(s.message||"Payment failed");return}n&&t(n.id)};return s.jsx(i(),{children:(0,s.jsxs)(d(),{children:[s.jsx(u(),{variant:"h6",gutterBottom:!0,children:"Payment Details"}),(0,s.jsxs)(u(),{variant:"body1",gutterBottom:!0,children:["Total Amount: ₹",e.toFixed(2)]}),o&&s.jsx(m(),{severity:"error",sx:{mb:2},children:o}),(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[s.jsx(g(),{sx:{mb:2,p:2,border:"1px solid #e0e0e0",borderRadius:1},children:s.jsx(f.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}}}}})}),s.jsx(y(),{type:"submit",variant:"contained",fullWidth:!0,disabled:!a||r,children:r?"Processing...":`Pay ₹${e.toFixed(2)}`})]})]})})};a()}catch(e){a(e)}})},61017:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SubscriptionPlans:()=>SubscriptionPlans});var a=r(20997);if(r(16689),6658==r.j)var s=r(53817),n=r.n(s);if(6658==r.j)var l=r(34892),i=r.n(l);if(6658==r.j)var o=r(18399),d=r.n(o);if(6658==r.j)var c=r(28277),u=r.n(c);if(6658==r.j)var h=r(60153),m=r.n(h);if(6658==r.j)var p=r(27184),g=r.n(p);if(6658==r.j)var x=r(98647),y=r.n(x);if(6658==r.j)var f=r(90816),v=r.n(f);if(6658==r.j)var b=r(80075),j=r.n(b);if(6658==r.j)var w=r(31595),N=r.n(w);var S=r(66741),P=r.n(S),C=r(77849),T=r.n(C),k=r(89663);let SubscriptionPlans=({plans:e,selectedPlan:t,onPlanSelect:r,billingCycle:s,onBillingCycleChange:l})=>{let getPrice=e=>{switch(s){case k.uC.MONTHLY:return e.price;case k.uC.QUARTERLY:return 2.7*e.price;case k.uC.ANNUALLY:return 12*e.price*.8;default:return e.price}},getBillingCycleText=e=>{switch(e){case k.uC.MONTHLY:return"month";case k.uC.QUARTERLY:return"quarter";case k.uC.ANNUALLY:return"year"}};return(0,a.jsxs)(n(),{children:[(0,a.jsxs)(n(),{sx:{textAlign:"center",mb:4},children:[a.jsx(i(),{variant:"h4",gutterBottom:!0,children:"Choose Your Plan"}),a.jsx(i(),{variant:"body1",color:"textSecondary",gutterBottom:!0,children:"Select the billing cycle that works best for you"}),(0,a.jsxs)(d(),{row:!0,value:s,onChange:e=>l(e.target.value),sx:{justifyContent:"center",mt:2},children:[a.jsx(u(),{value:k.uC.MONTHLY,control:a.jsx(m(),{}),label:"Monthly"}),a.jsx(u(),{value:k.uC.QUARTERLY,control:a.jsx(m(),{}),label:"Quarterly (10% off)"}),a.jsx(u(),{value:k.uC.ANNUALLY,control:a.jsx(m(),{}),label:"Annual (20% off)"})]})]}),a.jsx(g(),{container:!0,spacing:3,children:e.map(e=>a.jsx(g(),{item:!0,xs:12,md:4,children:(0,a.jsxs)(y(),{sx:{height:"100%",border:t===e.id?"2px solid #1976d2":"1px solid #e0e0e0",position:"relative"},children:[e.planType===k.k9.PREMIUM&&a.jsx(v(),{icon:a.jsx(T(),{}),label:"Most Popular",color:"primary",sx:{position:"absolute",top:16,right:16}}),(0,a.jsxs)(j(),{sx:{textAlign:"center",p:3},children:[a.jsx(i(),{variant:"h5",gutterBottom:!0,children:e.name}),(0,a.jsxs)(n(),{sx:{my:2},children:[(0,a.jsxs)(i(),{variant:"h3",component:"div",color:"primary",children:["₹",getPrice(e)]}),(0,a.jsxs)(i(),{variant:"body2",color:"textSecondary",children:["per ",getBillingCycleText(s)]})]}),a.jsx(i(),{variant:"body2",color:"textSecondary",sx:{mb:3},children:e.description}),(0,a.jsxs)(n(),{sx:{textAlign:"left",mb:3},children:[(0,a.jsxs)(i(),{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[a.jsx(P(),{color:"success",sx:{mr:1,fontSize:16}}),e.features.maxUsers," users"]}),(0,a.jsxs)(i(),{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[a.jsx(P(),{color:"success",sx:{mr:1,fontSize:16}}),e.features.maxStorage,"MB storage"]}),e.features.gstFiling&&(0,a.jsxs)(i(),{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[a.jsx(P(),{color:"success",sx:{mr:1,fontSize:16}}),"GST Filing"]}),e.features.taxFiling&&(0,a.jsxs)(i(),{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[a.jsx(P(),{color:"success",sx:{mr:1,fontSize:16}}),"Tax Filing"]}),e.features.advancedReporting&&(0,a.jsxs)(i(),{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[a.jsx(P(),{color:"success",sx:{mr:1,fontSize:16}}),"Advanced Reporting"]})]}),a.jsx(N(),{variant:t===e.id?"contained":"outlined",fullWidth:!0,onClick:()=>r(e.id),children:t===e.id?"Selected":"Select Plan"})]})]})},e.id))})]})}},52849:(e,t,r)=>{"use strict";r.d(t,{w:()=>DataTable});var a=r(20997),s=r(16689);if(6658==r.j)var n=r(98647),l=r.n(n);if(6658==r.j)var i=r(80075),o=r.n(i);if(6658==r.j)var d=r(53817),c=r.n(d);if(6658==r.j)var u=r(34892),h=r.n(u);if(6658==r.j)var m=r(95473),p=r.n(m);if(6658==r.j)var g=r(64213),x=r.n(g);if(6658==r.j)var y=r(27184),f=r.n(y);if(6658==r.j)var v=r(1579),b=r.n(v);if(6658==r.j)var j=r(22011),w=r.n(j);if(6658==r.j)var N=r(26059),S=r.n(N);if(6658==r.j)var P=r(4126),C=r.n(P);if(6658==r.j)var T=r(76072),k=r.n(T);if(6658==r.j)var A=r(31595),I=r.n(A);if(6658==r.j)var E=r(49280),D=r.n(E);if(6658==r.j)var L=r(9618),q=r.n(L);if(6658==r.j)var R=r(7479),z=r.n(R);if(6658==r.j)var O=r(99525),Z=r.n(O);if(6658==r.j)var B=r(56809),$=r.n(B);if(6658==r.j)var U=r(8297),F=r.n(U);if(6658==r.j)var M=r(42047),H=r.n(M);if(6658==r.j)var V=r(97406),_=r.n(V);var G=r(43866),Q=r.n(G),Y=r(42292),J=r.n(Y),X=r(1664),W=r.n(X),K=r(1914),ee=r.n(K),et=r(66741),er=r.n(et),ea=r(73280),es=r(95775);let DataTable=({title:e,resource:t,columns:r=[],data:n=[],onEdit:i,onStatusChange:d})=>{let[u,m]=(0,s.useState)(0),[g,y]=(0,s.useState)(10),[v,j]=(0,s.useState)(null),[N,P]=(0,s.useState)({}),[T,A]=(0,s.useState)(n),{getBlob:E,error:L}=(0,es.h)();(0,s.useEffect)(()=>{let e=[...n];if(N.search){let t=N.search.toLowerCase();e=e.filter(e=>{let r=Object.values(e).some(e=>"string"==typeof e&&e.toLowerCase().includes(t)),a=e.tenant?.name?.toLowerCase().includes(t);return r||a})}N.status&&(e=e.filter(e=>"users"===t?"active"===e.status?"active"===N.status:"inactive"===N.status:e.isActive?"active"===N.status:"inactive"===N.status)),N.startDate&&(e=e.filter(e=>new Date(e.createdAt||e.timestamp)>=new Date(N.startDate))),N.endDate&&(e=e.filter(e=>new Date(e.createdAt||e.timestamp)<=new Date(N.endDate))),A(e)},[N,n]);let handleDownload=async()=>{try{let e=r.filter(e=>"actions"!==e.id),a=T.map(t=>{let r={};return e.forEach(e=>{"tenant"===e.id?r[e.id]=t.tenant?.name||"-":"isActive"===e.id?r[e.id]=t[e.id]?"Active":"Inactive":r[e.id]=t[e.id]}),r}),s=convertToCSV(a,e),n=new Blob([s],{type:"text/csv;charset=utf-8;"}),l=window.URL.createObjectURL(n),i=document.createElement("a");i.href=l,i.download=`${t}.csv`,i.click()}catch(e){alert("Download failed")}},convertToCSV=(e,t)=>{let r=t.map(e=>e.label).join(","),a=e.map(e=>t.map(t=>e[t.id]?`"${e[t.id]}"`:"").join(","));return[r,...a].join("\n")},R=T.slice(u*g,u*g+g);return a.jsx(l(),{sx:{borderRadius:3,boxShadow:3},children:(0,a.jsxs)(o(),{children:[(0,a.jsxs)(c(),{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[a.jsx(h(),{variant:"h6",fontWeight:600,children:e}),(0,a.jsxs)(c(),{children:[a.jsx(p(),{onClick:e=>j(e.currentTarget),children:a.jsx(Q(),{})}),a.jsx(x(),{anchorEl:v,open:!!v,onClose:()=>j(null),PaperProps:{sx:{p:2,width:300}},disableAutoFocusItem:!0,autoFocus:!1,children:(0,a.jsxs)(f(),{container:!0,spacing:2,children:[a.jsx(f(),{item:!0,xs:12,children:a.jsx(b(),{fullWidth:!0,label:"Search",value:N.search||"",onChange:e=>P({...N,search:e.target.value}),variant:"outlined",size:"small",onKeyDown:e=>e.stopPropagation()})}),a.jsx(f(),{item:!0,xs:12,children:(0,a.jsxs)(w(),{fullWidth:!0,children:[a.jsx(S(),{children:"Status"}),(0,a.jsxs)(C(),{value:N.status||"",onChange:e=>P({...N,status:e.target.value}),label:"Status",children:[a.jsx(k(),{value:"",children:"All"}),a.jsx(k(),{value:"active",children:"Active"}),a.jsx(k(),{value:"inactive",children:"Inactive"})]})]})}),["startDate","endDate"].map(e=>a.jsx(f(),{item:!0,xs:12,children:a.jsx(ea.DatePicker,{label:"startDate"===e?"Start Date":"End Date",value:N[e]||null,onChange:t=>P({...N,[e]:t}),slotProps:{textField:{fullWidth:!0}}})},e)),a.jsx(f(),{item:!0,xs:12,children:a.jsx(I(),{fullWidth:!0,variant:"outlined",onClick:()=>P({}),children:"Clear Filters"})})]})}),a.jsx(p(),{onClick:handleDownload,children:a.jsx(J(),{})})]})]}),a.jsx(D(),{component:q(),sx:{borderRadius:2},children:0===T.length?a.jsx(c(),{sx:{p:4,textAlign:"center"},children:a.jsx(h(),{children:"No records found"})}):(0,a.jsxs)(z(),{children:[a.jsx(Z(),{children:(0,a.jsxs)($(),{children:[r.map(e=>a.jsx(F(),{children:e.label},e.id)),"auditLogs"!==t&&"subscriptions"!==t&&a.jsx(F(),{children:"Actions"})]})}),a.jsx(H(),{children:R.map(e=>(0,a.jsxs)($(),{children:[r.map(t=>a.jsx(F(),{children:t.format?t.format(e):e[t.id]},t.id)),"auditLogs"!==t&&"subscriptions"!==t&&(0,a.jsxs)(F(),{children:[a.jsx(p(),{size:"small",onClick:()=>i?.(e.id),children:a.jsx(W(),{})}),"users"!==t?a.jsx(p(),{size:"small",onClick:()=>d?.(e.id,!e.isActive),color:e.isActive?"secondary":"success",children:e.isActive?a.jsx(ee(),{}):a.jsx(er(),{})}):a.jsx(p(),{size:"small",onClick:()=>d?.(e.id,"active"!==e.status),color:"active"===e.status?"secondary":"success",children:"active"===e.status?a.jsx(ee(),{}):a.jsx(er(),{})})]})]},e.id))})]})}),a.jsx(_(),{rowsPerPageOptions:[5,10,25],component:"div",count:T.length,rowsPerPage:g,page:u,onPageChange:(e,t)=>m(t),onRowsPerPageChange:e=>{y(parseInt(e.target.value,10)),m(0)}})]})})}},4526:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TenantForm:()=>TenantForm});var a=r(20997),s=r(16689);if(6658==r.j)var n=r(53817),l=r.n(n);if(6658==r.j)var i=r(34892),o=r.n(i);if(6658==r.j)var d=r(1579),c=r.n(d);if(6658==r.j)var u=r(31595),h=r.n(u);let TenantForm=({onSubmit:e})=>{let[t,r]=(0,s.useState)({tenantName:"",adminEmail:"",contactNumber:"",address:""}),handleChange=e=>{r({...t,[e.target.name]:e.target.value})};return(0,a.jsxs)(l(),{component:"form",onSubmit:r=>{r.preventDefault(),e(t)},sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:500,mx:"auto"},children:[a.jsx(o(),{variant:"h6",gutterBottom:!0,children:"Tenant Details"}),a.jsx(c(),{label:"Tenant Name",name:"tenantName",value:t.tenantName,onChange:handleChange,required:!0}),a.jsx(c(),{label:"Admin Email",name:"adminEmail",type:"email",value:t.adminEmail,onChange:handleChange,required:!0}),a.jsx(c(),{label:"Contact Number",name:"contactNumber",value:t.contactNumber,onChange:handleChange}),a.jsx(c(),{label:"Address",name:"address",value:t.address,onChange:handleChange,multiline:!0,rows:3}),a.jsx(h(),{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:"Continue"})]})}},65823:(e,t,r)=>{"use strict";r.d(t,{C:()=>Badge});var a=r(20997);r(16689);var s=r(68103),n=r.n(s);let Badge=({children:e,variant:t="default",className:r=""})=>a.jsx("span",{className:n()("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 text-gray-800"}[t],r),children:e})},50502:(e,t,r)=>{"use strict";r.d(t,{z:()=>Button});var a=r(20997);r(16689);let Button=({children:e,onClick:t,disabled:r=!1,type:s="button",variant:n="primary",size:l="md",className:i="",isLoading:o=!1})=>a.jsx("button",{type:s,onClick:t,disabled:r||o,className:`inline-flex items-center justify-center rounded-md font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{sm:"px-2 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[l]} ${{primary:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:text-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-300",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 disabled:text-gray-400"}[n]} ${i}`,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0   c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e})},43294:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>d});var s=r(20997),n=r(16689),l=r(93571),i=e([l]);l=(i.then?(await i)():i)[0];let o=(0,n.forwardRef)(({className:e,label:t,error:r,helperText:a,id:n,...i},o)=>{let d=n||t?.toLowerCase().replace(/\s+/g,"-");return(0,s.jsxs)("div",{className:"space-y-1",children:[t&&s.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700",children:t}),s.jsx("input",{id:d,ref:o,className:(0,l.cn)("block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",r&&"border-red-500 focus:border-red-500 focus:ring-red-500",e),...i}),r&&s.jsx("p",{className:"text-sm text-red-600",role:"alert",children:r}),a&&!r&&s.jsx("p",{className:"text-sm text-gray-500",children:a})]})});o.displayName="FormInput";let d=6658==r.j?o:null;a()}catch(e){a(e)}})},16813:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var a=r(20997),s=r(16689),n=r.n(s);let l=n().forwardRef(({label:e,error:t,className:r="",...s},n)=>(0,a.jsxs)("div",{className:"w-full",children:[e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("input",{ref:n,...s,className:`w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"border-red-500":"border-gray-300"} ${r}`}),t&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:t})]}));l.displayName="Input"},7050:(e,t,r)=>{"use strict";r.d(t,{u:()=>Modal});var a=r(20997);if(r(16689),6658==r.j)var s=r(51203);let Modal=({isOpen:e,onClose:t,title:r,children:n,size:l="md",showCloseButton:i=!0,className:o=""})=>e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:`relative w-full ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-4xl"}[l]} mx-4 rounded-lg bg-white shadow-lg flex flex-col max-h-[90vh] ${o}`,children:[i&&a.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 focus:outline-none",children:a.jsx(s.Z,{className:"h-5 w-5"})}),r&&a.jsx("div",{className:"border-b px-6 py-3 text-lg font-semibold text-gray-800 flex-shrink-0",children:r}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n})]})}):null},91825:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>d});var s=r(20997),n=r(16689);if(6658==r.j)var l=r(51203);var i=r(93571),o=e([i]);i=(o.then?(await o)():o)[0];let d=6658==r.j?({show:e,onClose:t,message:r,type:a="info",duration:o=5e3})=>{let[d,c]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{c(!0)},[]),(0,n.useEffect)(()=>{if(d&&e&&o>0){let e=setTimeout(()=>{t()},o);return()=>clearTimeout(e)}},[e,o,t,d]),d&&e)?s.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:(0,s.jsxs)("div",{className:(0,i.cn)("flex items-center p-4 rounded-lg border shadow-lg transform transition-all duration-300",{success:"bg-green-100 border-green-400 text-green-800",error:"bg-red-100 border-red-400 text-red-800",warning:"bg-yellow-100 border-yellow-400 text-yellow-800",info:"bg-blue-100 border-blue-400 text-blue-800"}[a],e?"translate-x-0 opacity-100":"translate-x-full opacity-0"),role:"alert",children:[s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm font-medium",children:r})}),s.jsx("button",{onClick:t,className:"ml-4 p-1 rounded-md hover:bg-opacity-20 hover:bg-black focus:outline-none","aria-label":"Close notification",children:s.jsx(l.Z,{size:16})})]})}):null}:null;a()}catch(e){a(e)}})},41742:(e,t,r)=>{"use strict";r.d(t,{t:()=>Pagination});var a=r(20997);r(16689);let Pagination=({currentPage:e,totalPages:t,onPageChange:r})=>{if(t<=1)return null;let s=Array.from({length:t},(e,t)=>t+1);return(0,a.jsxs)("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[a.jsx("button",{onClick:()=>r(Math.max(e-1,1)),disabled:1===e,className:"px-3 py-1 border rounded-md text-sm bg-white hover:bg-gray-50 disabled:opacity-50",children:"Prev"}),s.map(t=>a.jsx("button",{onClick:()=>r(t),className:`px-3 py-1 border rounded-md text-sm ${e===t?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-50"}`,children:t},t)),a.jsx("button",{onClick:()=>r(Math.min(e+1,t)),disabled:e===t,className:"px-3 py-1 border rounded-md text-sm bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})}},75753:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Bw:()=>y,Ph:()=>h,Ql:()=>v,i4:()=>p,ki:()=>m});var s=r(20997),n=r(16689),l=r(3567),i=r(74004),o=r(375),d=r(17259),c=r(93571),u=e([l,c]);[l,c]=u.then?(await u)():u;let h=l.Root;l.Group;let m=l.Value,p=n.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(l.Trigger,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(l.Icon,{asChild:!0,children:s.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.Trigger.displayName;let g=n.forwardRef(({className:e,...t},r)=>s.jsx(l.ScrollUpButton,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(o.Z,{className:"h-4 w-4"})}));g.displayName=l.ScrollUpButton.displayName;let x=n.forwardRef(({className:e,...t},r)=>s.jsx(l.ScrollDownButton,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=l.ScrollDownButton.displayName;let y=n.forwardRef(({className:e,children:t,position:r="popper",...a},n)=>s.jsx(l.Portal,{children:(0,s.jsxs)(l.Content,{ref:n,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[s.jsx(g,{}),s.jsx(l.Viewport,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(x,{})]})}));y.displayName=l.Content.displayName;let f=n.forwardRef(({className:e,...t},r)=>s.jsx(l.Label,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));f.displayName=l.Label.displayName;let v=n.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(l.Item,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(l.ItemIndicator,{children:s.jsx(d.Z,{className:"h-4 w-4"})})}),s.jsx(l.ItemText,{children:t})]}));v.displayName=l.Item.displayName;let b=n.forwardRef(({className:e,...t},r)=>s.jsx(l.Separator,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));b.displayName=l.Separator.displayName,a()}catch(e){a(e)}})},18309:(e,t,r)=>{"use strict";r.d(t,{i:()=>Table});var a=r(20997);function Table({columns:e,data:t,emptyMessage:r="No records found",onRowClick:s}){return a.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:e.map(e=>a.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:e.header},String(e.key)))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:0===t.length?a.jsx("tr",{children:a.jsx("td",{colSpan:e.length,className:"px-4 py-4 text-center text-gray-500",children:r})}):t.map((t,r)=>a.jsx("tr",{onClick:()=>s?.(t),className:`hover:bg-gray-50 ${s?"cursor-pointer":""}`,children:e.map(e=>a.jsx("td",{className:"px-4 py-2 text-gray-700",children:e.render?e.render(t[e.key],t):String(t[e.key]??"")},String(e.key)))},t.id??r))})]})})}r(16689)},13521:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>x});var s=r(20997),n=r(16689),l=r(45641),i=r(1656),o=r(9926),d=r(50502),c=r(16813),u=r(75753),h=r(95775),m=r(37270),p=e([l,i,o,u,m]);[l,i,o,u,m]=p.then?(await p)():p;let g=o.z.object({name:o.z.string().min(1,"Name is required"),email:o.z.string().email("Invalid email address").optional().or(o.z.literal("")),phone:o.z.string().optional(),type:o.z.enum(["supplier","service_provider","contractor"]).default("supplier"),address:o.z.object({line1:o.z.string().min(1,"Address is required"),line2:o.z.string().optional(),city:o.z.string().min(1,"City is required"),state:o.z.string().min(1,"State is required"),postalCode:o.z.string().min(1,"Postal code is required"),country:o.z.string().min(1,"Country is required")}),gstin:o.z.string().optional(),pan:o.z.string().optional(),paymentTerms:o.z.string().optional()}),x=6658==r.j?({vendor:e,onSuccess:t,onCancel:r})=>{let{post:a,put:o}=(0,h.h)(),{register:p,handleSubmit:x,control:y,formState:{errors:f,isSubmitting:v},reset:b}=(0,l.useForm)({resolver:(0,i.zodResolver)(g),defaultValues:{type:"supplier",address:{country:"India"}}});(0,n.useEffect)(()=>{e&&b({name:e.name,email:e.email||"",phone:e.phone||"",type:e.type,gstin:e.gstin||"",pan:e.pan||"",paymentTerms:e.paymentTerms||"",address:{line1:e.billingAddress?.line1||"",line2:e.billingAddress?.line2||"",city:e.billingAddress?.city||"",state:e.billingAddress?.state||"",postalCode:e.billingAddress?.postalCode||"",country:e.billingAddress?.country||"India"}})},[e,b]);let onSubmit=async r=>{try{let s={...r,email:r.email||void 0,gstin:r.gstin||void 0,pan:r.pan||void 0};e?.id?(await o(`/api/vendors/${e.id}`,s),m.toast.success("Vendor updated successfully")):(await a("/api/vendors",s),m.toast.success("Vendor created successfully")),t()}catch(e){m.toast.error(e?.message||"Failed to save vendor")}};return(0,s.jsxs)("form",{onSubmit:x(onSubmit),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(c.I,{label:"Vendor Name",...p("name"),error:f.name?.message,disabled:v,required:!0}),s.jsx(l.Controller,{name:"type",control:y,render:({field:e})=>(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendor Type"}),(0,s.jsxs)(u.Ph,{value:e.value,onValueChange:e.onChange,disabled:v,children:[s.jsx(u.i4,{className:"w-full",children:s.jsx(u.ki,{placeholder:"Select Vendor Type"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"supplier",children:"Supplier"}),s.jsx(u.Ql,{value:"service_provider",children:"Service Provider"}),s.jsx(u.Ql,{value:"contractor",children:"Contractor"})]})]})]})}),f.type&&s.jsx("p",{className:"text-red-500 text-sm",children:f.type.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(c.I,{label:"Email",type:"email",...p("email"),error:f.email?.message,disabled:v}),s.jsx(c.I,{label:"Phone (e.g., 9876543210)",...p("phone"),error:f.phone?.message,disabled:v})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(c.I,{label:"Tax ID (e.g., 22AAAAA0000A1Z5)",...p("gstin"),error:f.gstin?.message,disabled:v}),s.jsx(c.I,{label:"PAN (e.g.,ABCDE1234F)",...p("pan"),error:f.pan?.message,disabled:v})]}),s.jsx(c.I,{label:"Payment Terms",...p("paymentTerms"),error:f.paymentTerms?.message,disabled:v,placeholder:"e.g., Net 30, Due on receipt"}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[s.jsx(c.I,{label:"Address Line 1",...p("address.line1"),error:f.address?.line1?.message,disabled:v,required:!0}),s.jsx(c.I,{label:"Address Line 2",...p("address.line2"),error:f.address?.line2?.message,disabled:v}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(c.I,{label:"City",...p("address.city"),error:f.address?.city?.message,disabled:v,required:!0}),s.jsx(c.I,{label:"State",...p("address.state"),error:f.address?.state?.message,disabled:v,required:!0}),s.jsx(c.I,{label:"Pincode (e.g., 560001)",...p("address.postalCode"),error:f.address?.postalCode?.message,disabled:v,required:!0}),s.jsx(c.I,{label:"Country",...p("address.country"),error:f.address?.country?.message,disabled:v,required:!0})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(d.z,{type:"button",variant:"outline",onClick:r,disabled:v,children:"Cancel"}),s.jsx(d.z,{type:"submit",isLoading:v,children:e?"Update Vendor":"Create Vendor"})]})]})}:null;a()}catch(e){a(e)}})},96213:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>u});var s=r(20997),n=r(16689),l=r(18309),i=r(95775),o=r(37270),d=r(41742),c=e([o]);o=(c.then?(await c)():c)[0];let u=6658==r.j?({onEditVendor:e})=>{let[t,r]=(0,n.useState)([]),[a,c]=(0,n.useState)(!0),[u,h]=(0,n.useState)({page:1,limit:10,total:0,pages:0}),{get:m,del:p}=(0,i.h)(),g=(0,n.useCallback)(async()=>{try{let e=await m(`/api/vendors?page=${u.page}&limit=${u.limit}`);r(e.data),h(e.pagination)}catch(e){o.toast.error(e?.message||"Failed to load vendors ❌")}finally{c(!1)}},[m,u.page,u.limit]);(0,n.useEffect)(()=>{g()},[g]);let handleDelete=async e=>{if(confirm("Are you sure you want to delete this vendor?"))try{await p(`/api/vendors/${e}`),o.toast.success("Vendor deleted successfully \uD83D\uDDD1️"),g()}catch(e){o.toast.error(e?.message||"Failed to delete vendor ❌")}},x=[{key:"name",header:"Vendor Name",render:(e,t)=>(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold",children:e.charAt(0)}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("div",{className:"font-medium text-gray-900",children:e}),s.jsx("div",{className:"text-sm text-gray-500 capitalize",children:t.type?.replace("_"," ")})]})]})},{key:"email",header:"Email"},{key:"phone",header:"Phone"},{key:"outstandingBalance",header:"Balance",render:e=>(0,s.jsxs)("span",{className:e>0?"text-red-600 font-medium":"text-green-600",children:["₹",e.toLocaleString()]})},{key:"createdAt",header:"Added On",render:e=>new Date(e).toLocaleDateString()},{key:"actions",header:"Actions",render:(t,r)=>(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>e(r),className:"text-blue-600 hover:text-blue-900 font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>handleDelete(r.id),className:"text-red-600 hover:text-red-900 font-medium",children:"Delete"})]})}];return a?s.jsx("div",{children:"Loading vendors..."}):(0,s.jsxs)("div",{children:[s.jsx(l.i,{columns:x,data:t,emptyMessage:"No vendors found"}),u.pages>1&&s.jsx(d.t,{currentPage:u.page,totalPages:u.pages,onPageChange:e=>{h(t=>({...t,page:e}))}})]})}:null;a()}catch(e){a(e)}})},99830:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Ho:()=>AuthProvider,aC:()=>useAuth});var s=r(20997),n=r(16689),l=r(52942),i=e([l]);l=(i.then?(await i)():i)[0];let o=6658==r.j?(0,n.createContext)(void 0):null,AuthProvider=({children:e})=>{let[t,r]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=localStorage.getItem("authToken");e?l.O.getCurrentUser().then(e=>{r(e)}).catch(()=>{localStorage.removeItem("authToken")}).finally(()=>{i(!1)}):i(!1)},[]);let login=async(e,t,a)=>{try{let s=await l.O.login(e,t,a);r(s.user),localStorage.setItem("authToken",s.token)}catch(e){throw e}},register=async e=>{try{let t=await l.O.register(e);r(t.user),localStorage.setItem("authToken",t.token)}catch(e){throw e}};return s.jsx(o.Provider,{value:{user:t,setUser:r,loading:a,login,logout:()=>{r(null),localStorage.removeItem("authToken")},register},children:!a&&e})},useAuth=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},91967:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{zX:()=>TenantProvider});var s=r(20997),n=r(16689),l=r(80869),i=r(99830),o=e([l,i]);[l,i]=o.then?(await o)():o;let d=6658==r.j?(0,n.createContext)(void 0):null,TenantProvider=({children:e})=>{let[t,r]=(0,n.useState)(null),[a,o]=(0,n.useState)(!0),{user:c}=(0,i.aC)();(0,n.useEffect)(()=>{c?loadTenant():o(!1)},[c]);let loadTenant=async()=>{try{let e=await l.G.getCurrentTenant();r(e)}catch(e){}finally{o(!1)}},updateTenant=async e=>{try{let t=await l.G.updateTenant(e);r(t)}catch(e){throw e}};return s.jsx(d.Provider,{value:{tenant:t,loading:a,updateTenant},children:e})};a()}catch(e){a(e)}})},78e3:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{AP:()=>selectAuthLoading,D0:()=>selectCurrentToken,Dj:()=>u,HF:()=>selectCurrentUser,Hn:()=>selectAuthError,ZP:()=>x,g$:()=>d,kS:()=>g,sT:()=>p});var s=r(75184),n=r(99648),l=e([n]);n=(l.then?(await l)():l)[0];let getStoredItem=e=>null,i=(()=>{try{let e=getStoredItem("authToken"),t=getStoredItem("user"),r=getStoredItem("currentTenant");return{token:e||null,user:t?JSON.parse(t):null,currentTenant:r?JSON.parse(r):null}}catch(e){return{token:null,user:null,currentTenant:null}}})(),o={user:i.user||null,token:i.token||null,isLoading:!1,error:null,currentTenant:i.currentTenant||null},d=(0,s.createAsyncThunk)("auth/refreshToken",async(e,{rejectWithValue:t})=>{try{let e=localStorage.getItem("refreshToken");if(!e)throw Error("No refresh token found");let t=await n.default.post(`${process.env.NEXT_PUBLIC_API_URL}/auth/refresh-token`,{refreshToken:e}),r=t.data?.accessToken;if(r)return localStorage.setItem("authToken",r),r;throw Error("Invalid refresh token response")}catch(e){return t(e.response?.data?.message||"Failed to refresh token")}}),c=(0,s.createSlice)({name:"auth",initialState:o,reducers:{setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.error=null},setCurrentTenant:(e,t)=>{e.currentTenant=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},logout:e=>{e.user=null,e.token=null,e.currentTenant=null,e.error=null,e.isLoading=!1}},extraReducers:e=>{e.addCase(d.fulfilled,(e,t)=>{e.token=t.payload})}}),{setCredentials:u,setCurrentTenant:h,setLoading:m,setError:p,logout:g}=c.actions,x=c.reducer,selectCurrentUser=e=>e.auth.user,selectCurrentToken=e=>e.auth.token,selectAuthLoading=e=>e.auth.isLoading,selectAuthError=e=>e.auth.error;a()}catch(e){a(e)}})},10202:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>c});var a=r(75184);let s={selectedCustomer:null,filters:{search:""}},n=(0,a.createSlice)({name:"customers",initialState:s,reducers:{setSelectedCustomer:(e,t)=>{e.selectedCustomer=t.payload},clearSelectedCustomer:e=>{e.selectedCustomer=null},setSearchFilter:(e,t)=>{e.filters.search=t.payload},clearFilters:e=>{e.filters=s.filters}}}),{setSelectedCustomer:l,clearSelectedCustomer:i,setSearchFilter:o,clearFilters:d}=n.actions,c=n.reducer},8164:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>h});var a=r(75184);let s={selectedInvoice:null,filters:{status:"all",customer:"",dateRange:{start:"",end:""}}},n=(0,a.createSlice)({name:"invoices",initialState:s,reducers:{setSelectedInvoice:(e,t)=>{e.selectedInvoice=t.payload},clearSelectedInvoice:e=>{e.selectedInvoice=null},setStatusFilter:(e,t)=>{e.filters.status=t.payload},setCustomerFilter:(e,t)=>{e.filters.customer=t.payload},setDateRangeFilter:(e,t)=>{e.filters.dateRange=t.payload},clearFilters:e=>{e.filters=s.filters}}}),{setSelectedInvoice:l,clearSelectedInvoice:i,setStatusFilter:o,setCustomerFilter:d,setDateRangeFilter:c,clearFilters:u}=n.actions,h=n.reducer},15682:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>u});var a=r(75184);let s={selectedProduct:null,filters:{search:"",active:null}},n=(0,a.createSlice)({name:"products",initialState:s,reducers:{setSelectedProduct:(e,t)=>{e.selectedProduct=t.payload},clearSelectedProduct:e=>{e.selectedProduct=null},setSearchFilter:(e,t)=>{e.filters.search=t.payload},setActiveFilter:(e,t)=>{e.filters.active=t.payload},clearFilters:e=>{e.filters=s.filters}}}),{setSelectedProduct:l,clearSelectedProduct:i,setSearchFilter:o,setActiveFilter:d,clearFilters:c}=n.actions,u=n.reducer},95775:(e,t,r)=>{"use strict";r.d(t,{h:()=>useApi});var a=r(16689);let useApi=()=>{let[e,t]=(0,a.useState)({data:null,loading:!1,error:null}),r=process.env.NEXT_PUBLIC_API_URL||"http://192.168.29.17:3001",s=(0,a.useCallback)(async(e,a)=>{t(e=>({...e,loading:!0,error:null}));try{let s=localStorage.getItem("authToken"),n=await fetch(`${r}${e}`,{headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{},...a?.headers},...a});if(!n.ok){let e=`HTTP error! status: ${n.status}`;try{let t=await n.json();Array.isArray(t.errors)?e=t.errors.join(", "):t.error?e=t.error:t.message&&(e=t.message)}catch{}throw Error(e)}let l=null,i=await n.text();if(i)try{l=JSON.parse(i)}catch{l=i}return t({data:l,loading:!1,error:null}),l}catch(r){let e=r?.message||("string"==typeof r?r:"An unknown error occurred");throw t({data:null,loading:!1,error:e}),Error(e)}},[]),n=(0,a.useCallback)(e=>s(e,{method:"GET"}),[s]),l=(0,a.useCallback)((e,t)=>s(e,{method:"POST",body:JSON.stringify(t)}),[s]),i=(0,a.useCallback)((e,t)=>s(e,{method:"PUT",body:JSON.stringify(t)}),[s]),o=(0,a.useCallback)((e,t)=>s(e,{method:"PATCH",body:JSON.stringify(t)}),[s]),d=(0,a.useCallback)(e=>s(e,{method:"DELETE"}),[s]),getBlob=async(e,t={})=>{let a=localStorage.getItem("authToken"),s=localStorage.getItem("currentTenant"),n=null;try{if(s){let e=JSON.parse(s);n=e.subdomain||e.id||null}}catch(e){}let l=await fetch(`${r}${e}`,{method:"GET",headers:{...a?{Authorization:`Bearer ${a}`}:{},...n?{"X-Tenant-Subdomain":n}:{},...t.headers}});if(!l.ok){let e=`HTTP error! status: ${l.status}`;try{let t=await l.json();t.error?e=t.error:t.message&&(e=t.message)}catch{}throw Error(e)}return await l.blob()};return{...e,get:n,post:l,put:i,patch:o,del:d,getBlob}}},59058:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{a:()=>useAuth});var s=r(1505),n=r(78e3),l=r(5632),i=e([n]);n=(i.then?(await i)():i)[0];let useAuth=()=>{let e=(0,s.TL)(),t=(0,l.useRouter)(),r=(0,s.CG)(n.HF),a=(0,s.CG)(n.D0),i=(0,s.CG)(n.AP),o=r?.tenantId||null;return{user:r,token:a,tenantId:o,isLoading:i,isAuthenticated:!!r&&!!a,logout:()=>{try{e((0,n.kS)()),t.push("/login")}catch(e){}}}};a()}catch(e){a(e)}})},93571:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{cn:()=>cn,p6:()=>formatDate,xG:()=>formatCurrency});var s=r(68103),n=r(68097),l=e([n]);function cn(...e){return(0,n.twMerge)((0,s.clsx)(e))}function formatCurrency(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function formatDate(e){let t="string"==typeof e?new Date(e):e;return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}n=(l.then?(await l)():l)[0],a()}catch(e){a(e)}})},4801:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>x});var s=r(20997),n=r(16689),l=r(6022),i=r(65195),o=r(1505),d=r(78e3),c=r(91967),u=r(99830);r(37016);var h=r(37270),m=r(73280),p=r(10298),g=e([i,d,c,u,h]);function AppContent({Component:e,pageProps:t}){let r=(0,o.TL)(),[a,l]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{l(!0)},[r]),a)?(0,s.jsxs)(m.LocalizationProvider,{dateAdapter:p.AdapterDayjs,children:[s.jsx(e,{...t}),s.jsx(h.Toaster,{position:"top-right"})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}[i,d,c,u,h]=g.then?(await g)():g;let x=6658==r.j?function(e){return s.jsx(l.Provider,{store:i.h,children:s.jsx(u.Ho,{children:s.jsx(c.zX,{children:s.jsx(AppContent,{...e})})})})}:null;a()}catch(e){a(e)}})},479:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>MyDocument});var a=r(20997),s=r(331),n=r.n(s),l=r(57518);let MyDocument=class MyDocument extends(6658==r.j?n():null){static async getInitialProps(e){let t=new l.ServerStyleSheet,r=e.renderPage;try{e.renderPage=()=>r({enhanceApp:e=>r=>t.collectStyles(a.jsx(e,{...r}))});let s=await n().getInitialProps(e);return{...s,styles:(0,a.jsxs)(a.Fragment,{children:[s.styles,t.getStyleElement()]})}}finally{t.seal()}}render(){return(0,a.jsxs)(s.Html,{lang:"en",children:[a.jsx(s.Head,{children:a.jsx("link",{rel:"preload",href:"/fonts/inter-var-latin.woff2",as:"font",type:"font/woff2",crossOrigin:"anonymous"})}),(0,a.jsxs)("body",{children:[a.jsx(s.Main,{}),a.jsx(s.NextScript,{})]})]})}}},32684:(e,t,r)=>{"use strict";r.d(t,{h:()=>n});var a=r(34335);let s=(0,a.fetchBaseQuery)({baseUrl:"http://192.168.29.17:3001/api",prepareHeaders:(e,{getState:t})=>{let r=t().auth.token;return r&&e.set("authorization",`Bearer ${r}`),e}}),n=(0,a.createApi)({reducerPath:"api",baseQuery:s,tagTypes:["User","Invoice","Customer","Product","Subscription","PaymentMethods"],endpoints:()=>({})})},17584:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>m});var s=r(99648),n=r(65195),l=r(78e3),i=r(37270),o=e([s,n,l,i]);[s,n,l,i]=o.then?(await o)():o;let d=process.env.NEXT_PUBLIC_API_URL||"http://192.168.29.17:3001/api",c=s.default.create({baseURL:d,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use(e=>{let t=n.h.getState(),r=t.auth.token||localStorage.getItem("token");return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e));let u=!1,h=[],processQueue=(e,t=null)=>{h.forEach(r=>{e?r.reject(e):r.resolve(t)}),h=[]};c.interceptors.response.use(e=>e.data,async e=>{let t=e.config;if(e.response?.status===401&&!t._retry){if(u)return new Promise(function(e,t){h.push({resolve:e,reject:t})}).then(e=>(t.headers.Authorization=`Bearer ${e}`,c(t))).catch(e=>Promise.reject(e));t._retry=!0,u=!0;try{let e=await n.h.dispatch((0,l.g$)()).unwrap();if(e)return processQueue(null,e),t.headers.Authorization=`Bearer ${e}`,c(t)}catch(e){return processQueue(e,null),n.h.dispatch((0,l.kS)()),i.toast.error("Session expired, please login again."),Promise.reject(e)}finally{u=!1}}return e.response?.data?.message&&i.toast.error(e.response.data.message),Promise.reject(e)});let m=6658==r.j?c:null;a()}catch(e){a(e)}})},52942:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{O:()=>l});var s=r(17584),n=e([s]);s=(n.then?(await n)():n)[0];let l={async login(e,t,r){let a=await s.Z.post("/auth/login",{email:e,password:t,tenantId:r});return a.data},async register(e){let t=await s.Z.post("/auth/register",e);return t.data},async getCurrentUser(){let e=await s.Z.get("/auth/me");return e.data},async requestPasswordReset(e){let t=await s.Z.post("/auth/forgot-password",{email:e});return t.data},async resetPassword(e,t){let r=await s.Z.post("/auth/reset-password",{token:e,password:t});return r.data},async getTenantsForUser(e){let t=await s.Z.get(`/auth/tenants/${e}`);return t.data}};a()}catch(e){a(e)}})},45366:(e,t,r)=>{"use strict";r.d(t,{YA:()=>n,_w:()=>l,l4:()=>i});var a=r(32684);let s=a.h.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e}),invalidatesTags:["User"]}),superUserLogin:e.mutation({query:e=>({url:"/auth/super-user-login",method:"POST",body:e}),invalidatesTags:["User"]}),register:e.mutation({query:e=>({url:"/auth/register",method:"POST",body:e})}),getCurrentUser:e.query({query:()=>"/auth/me",providesTags:["User"]}),forgotPassword:e.mutation({query:e=>({url:"/auth/forgot-password",method:"POST",body:e})}),resetPassword:e.mutation({query:({token:e,password:t})=>({url:`/auth/reset-password/${e}`,method:"POST",body:{password:t}})}),updateProfile:e.mutation({query:e=>({url:"/auth/profile",method:"PUT",body:e}),invalidatesTags:["User"]})})}),{useLoginMutation:n,useSuperUserLoginMutation:l,useRegisterMutation:i,useGetCurrentUserQuery:o,useForgotPasswordMutation:d,useResetPasswordMutation:c,useUpdateProfileMutation:u}=s},13111:(e,t,r)=>{"use strict";r.d(t,{A1:()=>l,GJ:()=>c,h4:()=>i,jN:()=>u,oC:()=>o,qD:()=>h,uo:()=>d,xu:()=>n});var a=r(32684);let s=a.h.injectEndpoints({endpoints:e=>({getSubscription:e.query({query:()=>"/billing/subscription",providesTags:["Subscription"]}),updateSubscription:e.mutation({query:e=>({url:"/billing/subscription",method:"PUT",body:e}),invalidatesTags:["Subscription"]}),getPaymentMethods:e.query({query:()=>"/billing/payment-methods",providesTags:["PaymentMethods"]}),addPaymentMethod:e.mutation({query:e=>({url:"/billing/payment-methods",method:"POST",body:e}),invalidatesTags:["PaymentMethods"]}),removePaymentMethod:e.mutation({query:e=>({url:`/billing/payment-methods/${e}`,method:"DELETE"}),invalidatesTags:["PaymentMethods"]}),setDefaultPaymentMethod:e.mutation({query:e=>({url:`/billing/payment-methods/${e}/default`,method:"POST"}),invalidatesTags:["PaymentMethods"]}),getBillingHistory:e.query({query:()=>"/billing/history"}),downloadInvoice:e.mutation({query:e=>({url:`/billing/invoices/${e}/download`,method:"GET",responseHandler:e=>e.blob()})})})}),{useGetSubscriptionQuery:n,useUpdateSubscriptionMutation:l,useGetPaymentMethodsQuery:i,useAddPaymentMethodMutation:o,useRemovePaymentMethodMutation:d,useSetDefaultPaymentMethodMutation:c,useGetBillingHistoryQuery:u,useDownloadInvoiceMutation:h}=s},28537:(e,t,r)=>{"use strict";r.d(t,{XC:()=>s});var a=r(34335);let s=(0,a.createApi)({reducerPath:"purchasesApi",baseQuery:(0,a.fetchBaseQuery)({baseUrl:"/api"}),tagTypes:["PurchaseOrder"],endpoints:e=>({getPurchaseOrders:e.query({query:e=>({url:"/purchases/orders",params:e}),providesTags:["PurchaseOrder"]}),getPurchaseOrderById:e.query({query:e=>`/purchases/orders/${e}`,providesTags:(e,t,r)=>[{type:"PurchaseOrder",id:r}]}),createPurchaseOrder:e.mutation({query:e=>({url:"/purchases/orders",method:"POST",body:e}),invalidatesTags:["PurchaseOrder"]}),updatePurchaseOrder:e.mutation({query:({id:e,data:t})=>({url:`/purchases/orders/${e}`,method:"PUT",body:t}),invalidatesTags:(e,t,{id:r})=>[{type:"PurchaseOrder",id:r}]}),deletePurchaseOrder:e.mutation({query:e=>({url:`/purchases/orders/${e}`,method:"DELETE"}),invalidatesTags:["PurchaseOrder"]}),updatePurchaseOrderStatus:e.mutation({query:({id:e,status:t})=>({url:`/purchases/orders/${e}/status`,method:"PATCH",body:{status:t}}),invalidatesTags:(e,t,{id:r})=>[{type:"PurchaseOrder",id:r}]}),receivePurchaseOrderItems:e.mutation({query:({id:e,receivedItems:t})=>({url:`/purchases/orders/${e}/receive`,method:"POST",body:{receivedItems:t}}),invalidatesTags:(e,t,{id:r})=>[{type:"PurchaseOrder",id:r}]}),getPurchaseOrdersByVendor:e.query({query:({vendorId:e,...t})=>({url:`/purchases/vendors/${e}/orders`,params:t}),providesTags:["PurchaseOrder"]}),getPurchaseStatistics:e.query({query:e=>({url:"/purchases/statistics",params:e})}),exportPurchaseOrders:e.mutation({query:e=>({url:"/purchases/export",method:"GET",params:e,responseHandler:e=>e.blob()})}),uploadAttachment:e.mutation({query:({id:e,file:t})=>{let r=new FormData;return r.append("file",t),{url:`/purchases/orders/${e}/attachments`,method:"POST",body:r}},invalidatesTags:(e,t,{id:r})=>[{type:"PurchaseOrder",id:r}]}),deleteAttachment:e.mutation({query:({id:e,attachmentId:t})=>({url:`/purchases/orders/${e}/attachments/${t}`,method:"DELETE"}),invalidatesTags:(e,t,{id:r})=>[{type:"PurchaseOrder",id:r}]}),getAuditLog:e.query({query:e=>`/purchases/orders/${e}/audit-log`})})}),{useGetPurchaseOrdersQuery:n,useGetPurchaseOrderByIdQuery:l,useCreatePurchaseOrderMutation:i,useUpdatePurchaseOrderMutation:o,useDeletePurchaseOrderMutation:d,useUpdatePurchaseOrderStatusMutation:c,useReceivePurchaseOrderItemsMutation:u,useGetPurchaseOrdersByVendorQuery:h,useGetPurchaseStatisticsQuery:m,useExportPurchaseOrdersMutation:p,useUploadAttachmentMutation:g,useDeleteAttachmentMutation:x,useGetAuditLogQuery:y}=s},80869:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{G:()=>l});var s=r(17584),n=e([s]);s=(n.then?(await n)():n)[0];let l={async getCurrentTenant(){let e=await s.Z.get("/tenant");return e.data},async updateTenant(e){let t=await s.Z.put("/tenant",e);return t.data},async getBillingInfo(){let e=await s.Z.get("/tenant/billing");return e.data},async updateBillingInfo(e){let t=await s.Z.put("/tenant/billing",e);return t.data},async getSubscription(){let e=await s.Z.get("/tenant/subscription");return e.data},async updateSubscription(e){let t=await s.Z.put("/tenant/subscription",{plan:e});return t.data}};a()}catch(e){a(e)}})},1505:(e,t,r)=>{"use strict";r.d(t,{CG:()=>s,TL:()=>useAppDispatch});var a=r(6022);let useAppDispatch=()=>(0,a.useDispatch)(),s=6658==r.j?a.useSelector:null},65195:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{h:()=>h});var s=r(75184),n=r(32684),l=r(28537),i=r(78e3),o=r(8164),d=r(10202),c=r(15682),u=e([i]);i=(u.then?(await u)():u)[0];let h=(0,s.configureStore)({reducer:{auth:i.ZP,invoices:o.ZP,customers:d.ZP,products:c.ZP,[n.h.reducerPath]:n.h.reducer,[l.XC.reducerPath]:l.XC.reducer},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"],ignoredPaths:["api.mutations"]}}).concat(n.h.middleware).concat(l.XC.middleware),devTools:!1});a()}catch(e){a(e)}})},89663:(e,t,r)=>{"use strict";var a,s,n;r.d(t,{k9:()=>s,uC:()=>n}),function(e){e.DRAFT="draft",e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.COMPLETED="completed",e.CANCELLED="cancelled"}(a||(a={})),function(e){e.BASIC="basic",e.PREMIUM="premium",e.ENTERPRISE="enterprise"}(s||(s={})),function(e){e.MONTHLY="monthly",e.QUARTERLY="quarterly",e.ANNUALLY="annually"}(n||(n={}))},37016:()=>{}};