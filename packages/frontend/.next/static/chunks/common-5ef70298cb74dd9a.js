"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8592],{33766:function(e,t,r){r.d(t,{Z:function(){return layout_DashboardLayout}});var a=r(52322),s=r(2784),n=r(12472),l=r(35491),i=r(38936),o=r(99888),d=r(83495),c=r(72914),u=r(3408),m=r(7466),h=r(2656),x=r(59814),g=r(32199),p=r(29832),f=r(57344),y=r(51203),b=r(93571),v=r(5632),j=r(39097),w=r.n(j),N=r(96577),Z=r.n(N),C=r(95775);let S=[{name:"Dashboard",href:"/app/dashboard",icon:l.Z},{name:"Users",href:"/app/users",icon:i.Z},{name:"Customers",href:"/app/customers",icon:o.Z},{name:"Vendors",href:"/app/vendors",icon:d.Z},{name:"Products",href:"/app/products",icon:c.Z},{name:"Purchases",href:"/app/purchases",icon:u.Z},{name:"Invoices",href:"/app/invoices",icon:m.Z},{name:"Billing",href:"/app/subscription",icon:h.Z},{name:"Loyalty",href:"/app/loyality",icon:x.Z},{name:"Reports",href:"/app/reports",icon:g.Z},{name:"Settings",href:"/app/settings",icon:p.Z},{name:"Request",href:"/app/professional-requests",icon:f.Z}];var layout_Sidebar=e=>{let{isOpen:t,onClose:r}=e,n=(0,v.useRouter)(),[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(null),{get:c,patch:u}=(0,C.h)();(0,s.useEffect)(()=>{let fetchUser=async()=>{try{let e=await c("/api/auth/me");d(e.user)}catch(e){}};fetchUser()},[]);let m=S.filter(e=>(null==o?void 0:o.role)!=="professional_user"||"Billing"!==e.name&&"Request"!==e.name),toggleMenu=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden",onClick:r}),(0,a.jsxs)("div",{className:(0,b.cn)("fixed inset-y-0 left-0 z-30 w-64 bg-gray-900 transform transition duration-200 ease-in-out lg:static lg:inset-0 lg:translate-x-0",t?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 bg-gray-800",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(Z(),{src:"/logo.png",alt:"Billing Software Logo",width:100,height:30,className:"rounded-md"})}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white lg:hidden",children:(0,a.jsx)(y.Z,{size:24})})]}),(0,a.jsx)("nav",{className:"mt-8",children:(0,a.jsx)("div",{className:"px-4 space-y-2",children:o?m.map(e=>{let t=e.href&&n.pathname===e.href;if(e.children){let t=l.includes(e.name);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>toggleMenu(e.name),className:(0,b.cn)("w-full flex items-center px-2 py-2 text-base font-medium rounded-md text-left",t?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,a.jsx)(e.icon,{className:(0,b.cn)("mr-4 h-6 w-6",t?"text-white":"text-gray-400 group-hover:text-white")}),"Request"===e.name?(null==o?void 0:o.role)==="admin"?"Request Professional":"Request Business":e.name]}),t&&(0,a.jsx)("div",{className:"ml-8 mt-2 space-y-1",children:e.children.map(e=>{let t=n.pathname===e.href;return(0,a.jsx)(w(),{href:e.href,className:(0,b.cn)("block px-2 py-1 text-sm rounded-md",t?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-800 hover:text-white"),children:e.name},e.name)})})]},e.name)}return(0,a.jsxs)(w(),{href:e.href,className:(0,b.cn)("group flex items-center px-2 py-2 text-base font-medium rounded-md",t?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,a.jsx)(e.icon,{className:(0,b.cn)("mr-4 h-6 w-6",t?"text-white":"text-gray-400 group-hover:text-white")}),"Request"===e.name?(null==o?void 0:o.role)==="admin"?"Request Professional":"Request Business":e.name]},e.name)}):(0,a.jsx)("div",{className:"text-gray-400 text-sm px-2",children:"Loading..."})})})]})]})},layout_DashboardLayout=e=>{let{children:t}=e,[r,l]=s.useState(!1);return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100 relative",children:[(0,a.jsx)(layout_Sidebar,{isOpen:r,onClose:()=>l(!1)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(n.Z,{onMenuClick:()=>l(!0)}),(0,a.jsx)("div",{className:"absolute inset-0 bg-center bg-no-repeat bg-contain pointer-events-none",style:{backgroundImage:"url('/logo.jfif')",opacity:.03}}),(0,a.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:t})]})]})}},12472:function(e,t,r){var a=r(52322),s=r(2784),n=r(41924),l=r(57344),i=r(79067),o=r(1505),d=r(78e3),c=r(5632),u=r(56958),m=r(95775);t.Z=e=>{let{onMenuClick:t}=e,[r,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),y=(0,o.TL)();(0,c.useRouter)();let{get:b}=(0,m.h)(),handleLogout=async()=>{y((0,d.kS)()),window.location.href="/auth/login"};(0,s.useEffect)(()=>{let fetchUser=async()=>{try{let e=await b("/api/auth/mewithtenant");g(e.user),f(e.tenant)}catch(e){}};fetchUser()},[]);let viewBusiness=async(e,t)=>{if(confirm("Are you sure you want to switch tenant?"))try{let r=await b("/api/customers/switchTenant/".concat(e,"/").concat(t));y((0,d.Dj)({user:r.user,token:r.accessToken})),localStorage.setItem("token",r.accessToken),localStorage.setItem("user",JSON.stringify(r.user)),u.Am.success("Tenant switched successfully \uD83D\uDDD1️"),window.location.href="/app/dashboard"}catch(e){u.Am.error((null==e?void 0:e.message)||"Failed to switch tenant ❌")}};return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:t,className:"p-1 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 lg:hidden",children:(0,a.jsx)(n.Z,{size:24})}),(0,a.jsx)("div",{className:"relative ml-4 hidden md:block",children:(null==x?void 0:x.role)==="professional_user"&&(0,a.jsxs)("p",{children:["You are viewing business of"," ",(0,a.jsx)("strong",{style:{backgroundColor:"red",padding:"2px 6px",color:"#fff",borderRadius:"4px"},children:null==p?void 0:p.businessName}),(0,a.jsx)("button",{onClick:()=>viewBusiness(null==x?void 0:x.id,"professional"),className:"ml-2 px-3 py-1 text-sm rounded-full bg-blue-600 text-white font-medium shadow hover:bg-blue-700 transition",children:"Return Back"})]})})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>h(e=>!e),children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:(0,a.jsx)(l.Z,{size:16})}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700 hidden md:block",children:x?"".concat(x.firstName," ").concat(x.lastName):""})]}),r&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:(0,a.jsxs)("button",{onClick:handleLogout,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,a.jsx)(i.Z,{size:16}),(0,a.jsx)("span",{children:"Logout"})]})})]})})]})})}},24299:function(e,t,r){r.r(t),r.d(t,{PaymentForm:function(){return PaymentForm}});var a=r(52322),s=r(2784),n=r(92096),l=r(7671),i=r(62197),o=r(12352),d=r(69692),c=r(8204),u=r(91118);let PaymentForm=e=>{let{amount:t,onSubmit:r,isLoading:m=!1}=e,h=(0,u.MD)(),x=(0,u.lq)(),[g,p]=(0,s.useState)(null),handleSubmit=async e=>{if(e.preventDefault(),!h||!x)return;p(null);let t=x.getElement(u.NZ);if(!t){p("Card element not found");return}let{error:a,paymentMethod:s}=await h.createPaymentMethod({type:"card",card:t});if(a){p(a.message||"Payment failed");return}s&&r(s.id)};return(0,a.jsx)(n.Z,{children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:"Payment Details"}),(0,a.jsxs)(i.Z,{variant:"body1",gutterBottom:!0,children:["Total Amount: ₹",t.toFixed(2)]}),g&&(0,a.jsx)(o.Z,{severity:"error",sx:{mb:2},children:g}),(0,a.jsxs)("form",{onSubmit:handleSubmit,children:[(0,a.jsx)(d.Z,{sx:{mb:2,p:2,border:"1px solid #e0e0e0",borderRadius:1},children:(0,a.jsx)(u.NZ,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}}}}})}),(0,a.jsx)(c.Z,{type:"submit",variant:"contained",fullWidth:!0,disabled:!h||m,children:m?"Processing...":"Pay ₹".concat(t.toFixed(2))})]})]})})}},61017:function(e,t,r){r.r(t),r.d(t,{SubscriptionPlans:function(){return SubscriptionPlans}});var a=r(52322);r(2784);var s=r(69692),n=r(62197),l=r(91813),i=r(52616),o=r(72937),d=r(41075),c=r(92096),u=r(99385),m=r(7671),h=r(8204),x=r(60888),g=r(14957),p=r(89663);let SubscriptionPlans=e=>{let{plans:t,selectedPlan:r,onPlanSelect:f,billingCycle:y,onBillingCycleChange:b}=e,getPrice=e=>{switch(y){case p.uC.MONTHLY:return e.price;case p.uC.QUARTERLY:return 2.7*e.price;case p.uC.ANNUALLY:return 12*e.price*.8;default:return e.price}},getBillingCycleText=e=>{switch(e){case p.uC.MONTHLY:return"month";case p.uC.QUARTERLY:return"quarter";case p.uC.ANNUALLY:return"year"}};return(0,a.jsxs)(s.Z,{children:[(0,a.jsxs)(s.Z,{sx:{textAlign:"center",mb:4},children:[(0,a.jsx)(n.Z,{variant:"h4",gutterBottom:!0,children:"Choose Your Plan"}),(0,a.jsx)(n.Z,{variant:"body1",color:"textSecondary",gutterBottom:!0,children:"Select the billing cycle that works best for you"}),(0,a.jsxs)(l.Z,{row:!0,value:y,onChange:e=>b(e.target.value),sx:{justifyContent:"center",mt:2},children:[(0,a.jsx)(i.Z,{value:p.uC.MONTHLY,control:(0,a.jsx)(o.Z,{}),label:"Monthly"}),(0,a.jsx)(i.Z,{value:p.uC.QUARTERLY,control:(0,a.jsx)(o.Z,{}),label:"Quarterly (10% off)"}),(0,a.jsx)(i.Z,{value:p.uC.ANNUALLY,control:(0,a.jsx)(o.Z,{}),label:"Annual (20% off)"})]})]}),(0,a.jsx)(d.ZP,{container:!0,spacing:3,children:t.map(e=>(0,a.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,a.jsxs)(c.Z,{sx:{height:"100%",border:r===e.id?"2px solid #1976d2":"1px solid #e0e0e0",position:"relative"},children:[e.planType===p.k9.PREMIUM&&(0,a.jsx)(u.Z,{icon:(0,a.jsx)(g.Z,{}),label:"Most Popular",color:"primary",sx:{position:"absolute",top:16,right:16}}),(0,a.jsxs)(m.Z,{sx:{textAlign:"center",p:3},children:[(0,a.jsx)(n.Z,{variant:"h5",gutterBottom:!0,children:e.name}),(0,a.jsxs)(s.Z,{sx:{my:2},children:[(0,a.jsxs)(n.Z,{variant:"h3",component:"div",color:"primary",children:["₹",getPrice(e)]}),(0,a.jsxs)(n.Z,{variant:"body2",color:"textSecondary",children:["per ",getBillingCycleText(y)]})]}),(0,a.jsx)(n.Z,{variant:"body2",color:"textSecondary",sx:{mb:3},children:e.description}),(0,a.jsxs)(s.Z,{sx:{textAlign:"left",mb:3},children:[(0,a.jsxs)(n.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(x.Z,{color:"success",sx:{mr:1,fontSize:16}}),e.features.maxUsers," users"]}),(0,a.jsxs)(n.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(x.Z,{color:"success",sx:{mr:1,fontSize:16}}),e.features.maxStorage,"MB storage"]}),e.features.gstFiling&&(0,a.jsxs)(n.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(x.Z,{color:"success",sx:{mr:1,fontSize:16}}),"GST Filing"]}),e.features.taxFiling&&(0,a.jsxs)(n.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(x.Z,{color:"success",sx:{mr:1,fontSize:16}}),"Tax Filing"]}),e.features.advancedReporting&&(0,a.jsxs)(n.Z,{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(x.Z,{color:"success",sx:{mr:1,fontSize:16}}),"Advanced Reporting"]})]}),(0,a.jsx)(h.Z,{variant:r===e.id?"contained":"outlined",fullWidth:!0,onClick:()=>f(e.id),children:r===e.id?"Selected":"Select Plan"})]})]})},e.id))})]})}},52849:function(e,t,r){r.d(t,{w:function(){return DataTable}});var a=r(52322),s=r(2784),n=r(92096),l=r(7671),i=r(69692),o=r(62197),d=r(85801),c=r(4268),u=r(41075),m=r(45596),h=r(69506),x=r(45986),g=r(41268),p=r(425),f=r(8204),y=r(11511),b=r(35744),v=r(25485),j=r(24254),w=r(86973),N=r(88206),Z=r(36284),C=r(72742),S=r(81216),A=r(14689),P=r(77957),T=r(38780),k=r(60888),D=r(32040),E=r(95775);let DataTable=e=>{let{title:t,resource:r,columns:L=[],data:R=[],onEdit:I,onStatusChange:q}=e,[_,B]=(0,s.useState)(0),[U,z]=(0,s.useState)(10),[M,F]=(0,s.useState)(null),[O,V]=(0,s.useState)({}),[Y,G]=(0,s.useState)(R),{getBlob:H,error:Q}=(0,E.h)();(0,s.useEffect)(()=>{let e=[...R];if(O.search){let t=O.search.toLowerCase();e=e.filter(e=>{var r,a;let s=Object.values(e).some(e=>"string"==typeof e&&e.toLowerCase().includes(t)),n=null===(a=e.tenant)||void 0===a?void 0:null===(r=a.name)||void 0===r?void 0:r.toLowerCase().includes(t);return s||n})}O.status&&(e=e.filter(e=>"users"===r?"active"===e.status?"active"===O.status:"inactive"===O.status:e.isActive?"active"===O.status:"inactive"===O.status)),O.startDate&&(e=e.filter(e=>new Date(e.createdAt||e.timestamp)>=new Date(O.startDate))),O.endDate&&(e=e.filter(e=>new Date(e.createdAt||e.timestamp)<=new Date(O.endDate))),G(e)},[O,R]);let handleDownload=async()=>{try{let e=L.filter(e=>"actions"!==e.id),t=Y.map(t=>{let r={};return e.forEach(e=>{if("tenant"===e.id){var a;r[e.id]=(null===(a=t.tenant)||void 0===a?void 0:a.name)||"-"}else"isActive"===e.id?r[e.id]=t[e.id]?"Active":"Inactive":r[e.id]=t[e.id]}),r}),a=convertToCSV(t,e),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(s),l=document.createElement("a");l.href=n,l.download="".concat(r,".csv"),l.click()}catch(e){alert("Download failed")}},convertToCSV=(e,t)=>{let r=t.map(e=>e.label).join(","),a=e.map(e=>t.map(t=>e[t.id]?'"'.concat(e[t.id],'"'):"").join(","));return[r,...a].join("\n")},W=Y.slice(_*U,_*U+U);return(0,a.jsx)(n.Z,{sx:{borderRadius:3,boxShadow:3},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)(i.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,a.jsx)(o.Z,{variant:"h6",fontWeight:600,children:t}),(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(d.Z,{onClick:e=>F(e.currentTarget),children:(0,a.jsx)(S.Z,{})}),(0,a.jsx)(c.Z,{anchorEl:M,open:!!M,onClose:()=>F(null),PaperProps:{sx:{p:2,width:300}},disableAutoFocusItem:!0,autoFocus:!1,children:(0,a.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(m.Z,{fullWidth:!0,label:"Search",value:O.search||"",onChange:e=>V({...O,search:e.target.value}),variant:"outlined",size:"small",onKeyDown:e=>e.stopPropagation()})}),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsxs)(h.Z,{fullWidth:!0,children:[(0,a.jsx)(x.Z,{children:"Status"}),(0,a.jsxs)(g.Z,{value:O.status||"",onChange:e=>V({...O,status:e.target.value}),label:"Status",children:[(0,a.jsx)(p.Z,{value:"",children:"All"}),(0,a.jsx)(p.Z,{value:"active",children:"Active"}),(0,a.jsx)(p.Z,{value:"inactive",children:"Inactive"})]})]})}),["startDate","endDate"].map(e=>(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(D.M,{label:"startDate"===e?"Start Date":"End Date",value:O[e]||null,onChange:t=>V({...O,[e]:t}),slotProps:{textField:{fullWidth:!0}}})},e)),(0,a.jsx)(u.ZP,{item:!0,xs:12,children:(0,a.jsx)(f.Z,{fullWidth:!0,variant:"outlined",onClick:()=>V({}),children:"Clear Filters"})})]})}),(0,a.jsx)(d.Z,{onClick:handleDownload,children:(0,a.jsx)(A.Z,{})})]})]}),(0,a.jsx)(y.Z,{component:b.Z,sx:{borderRadius:2},children:0===Y.length?(0,a.jsx)(i.Z,{sx:{p:4,textAlign:"center"},children:(0,a.jsx)(o.Z,{children:"No records found"})}):(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(j.Z,{children:(0,a.jsxs)(w.Z,{children:[L.map(e=>(0,a.jsx)(N.Z,{children:e.label},e.id)),"auditLogs"!==r&&"subscriptions"!==r&&(0,a.jsx)(N.Z,{children:"Actions"})]})}),(0,a.jsx)(Z.Z,{children:W.map(e=>(0,a.jsxs)(w.Z,{children:[L.map(t=>(0,a.jsx)(N.Z,{children:t.format?t.format(e):e[t.id]},t.id)),"auditLogs"!==r&&"subscriptions"!==r&&(0,a.jsxs)(N.Z,{children:[(0,a.jsx)(d.Z,{size:"small",onClick:()=>null==I?void 0:I(e.id),children:(0,a.jsx)(P.Z,{})}),"users"!==r?(0,a.jsx)(d.Z,{size:"small",onClick:()=>null==q?void 0:q(e.id,!e.isActive),color:e.isActive?"secondary":"success",children:e.isActive?(0,a.jsx)(T.Z,{}):(0,a.jsx)(k.Z,{})}):(0,a.jsx)(d.Z,{size:"small",onClick:()=>null==q?void 0:q(e.id,"active"!==e.status),color:"active"===e.status?"secondary":"success",children:"active"===e.status?(0,a.jsx)(T.Z,{}):(0,a.jsx)(k.Z,{})})]})]},e.id))})]})}),(0,a.jsx)(C.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:Y.length,rowsPerPage:U,page:_,onPageChange:(e,t)=>B(t),onRowsPerPageChange:e=>{z(parseInt(e.target.value,10)),B(0)}})]})})}},4526:function(e,t,r){r.r(t),r.d(t,{TenantForm:function(){return TenantForm}});var a=r(52322),s=r(2784),n=r(69692),l=r(62197),i=r(45596),o=r(8204);let TenantForm=e=>{let{onSubmit:t}=e,[r,d]=(0,s.useState)({tenantName:"",adminEmail:"",contactNumber:"",address:""}),handleChange=e=>{d({...r,[e.target.name]:e.target.value})};return(0,a.jsxs)(n.Z,{component:"form",onSubmit:e=>{e.preventDefault(),t(r)},sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:500,mx:"auto"},children:[(0,a.jsx)(l.Z,{variant:"h6",gutterBottom:!0,children:"Tenant Details"}),(0,a.jsx)(i.Z,{label:"Tenant Name",name:"tenantName",value:r.tenantName,onChange:handleChange,required:!0}),(0,a.jsx)(i.Z,{label:"Admin Email",name:"adminEmail",type:"email",value:r.adminEmail,onChange:handleChange,required:!0}),(0,a.jsx)(i.Z,{label:"Contact Number",name:"contactNumber",value:r.contactNumber,onChange:handleChange}),(0,a.jsx)(i.Z,{label:"Address",name:"address",value:r.address,onChange:handleChange,multiline:!0,rows:3}),(0,a.jsx)(o.Z,{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:"Continue"})]})}},65823:function(e,t,r){r.d(t,{C:function(){return Badge}});var a=r(52322);r(2784);var s=r(6277);let Badge=e=>{let{children:t,variant:r="default",className:n=""}=e;return(0,a.jsx)("span",{className:(0,s.Z)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",outline:"border border-gray-300 text-gray-800"}[r],n),children:t})}},50502:function(e,t,r){r.d(t,{z:function(){return Button}});var a=r(52322);r(2784);let Button=e=>{let{children:t,onClick:r,disabled:s=!1,type:n="button",variant:l="primary",size:i="md",className:o="",isLoading:d=!1}=e;return(0,a.jsx)("button",{type:n,onClick:r,disabled:s||d,className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({sm:"px-2 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[i]," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:text-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-300",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 disabled:text-gray-400"}[l]," ").concat(o),children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0   c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):t})}},43294:function(e,t,r){var a=r(52322),s=r(2784),n=r(93571);let l=(0,s.forwardRef)((e,t)=>{let{className:r,label:s,error:l,helperText:i,id:o,...d}=e,c=o||(null==s?void 0:s.toLowerCase().replace(/\s+/g,"-"));return(0,a.jsxs)("div",{className:"space-y-1",children:[s&&(0,a.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:s}),(0,a.jsx)("input",{id:c,ref:t,className:(0,n.cn)("block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",l&&"border-red-500 focus:border-red-500 focus:ring-red-500",r),...d}),l&&(0,a.jsx)("p",{className:"text-sm text-red-600",role:"alert",children:l}),i&&!l&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:i})]})});l.displayName="FormInput",t.Z=l},16813:function(e,t,r){r.d(t,{I:function(){return n}});var a=r(52322),s=r(2784);let n=s.forwardRef((e,t)=>{let{label:r,error:s,className:n="",...l}=e;return(0,a.jsxs)("div",{className:"w-full",children:[r&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,a.jsx)("input",{ref:t,...l,className:"w-full rounded-md border px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(s?"border-red-500":"border-gray-300"," ").concat(n)}),s&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:s})]})});n.displayName="Input"},7050:function(e,t,r){r.d(t,{u:function(){return Modal}});var a=r(52322);r(2784);var s=r(51203);let Modal=e=>{let{isOpen:t,onClose:r,title:n,children:l,size:i="md",showCloseButton:o=!0,className:d=""}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"relative w-full ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-4xl"}[i]," mx-4 rounded-lg bg-white shadow-lg flex flex-col max-h-[90vh] ").concat(d),children:[o&&(0,a.jsx)("button",{onClick:r,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 focus:outline-none",children:(0,a.jsx)(s.Z,{className:"h-5 w-5"})}),n&&(0,a.jsx)("div",{className:"border-b px-6 py-3 text-lg font-semibold text-gray-800 flex-shrink-0",children:n}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:l})]})}):null}},91825:function(e,t,r){var a=r(52322),s=r(2784),n=r(51203),l=r(93571);t.Z=e=>{let{show:t,onClose:r,message:i,type:o="info",duration:d=5e3}=e,[c,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{u(!0)},[]),(0,s.useEffect)(()=>{if(c&&t&&d>0){let e=setTimeout(()=>{r()},d);return()=>clearTimeout(e)}},[t,d,r,c]),c&&t)?(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:(0,a.jsxs)("div",{className:(0,l.cn)("flex items-center p-4 rounded-lg border shadow-lg transform transition-all duration-300",{success:"bg-green-100 border-green-400 text-green-800",error:"bg-red-100 border-red-400 text-red-800",warning:"bg-yellow-100 border-yellow-400 text-yellow-800",info:"bg-blue-100 border-blue-400 text-blue-800"}[o],t?"translate-x-0 opacity-100":"translate-x-full opacity-0"),role:"alert",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm font-medium",children:i})}),(0,a.jsx)("button",{onClick:r,className:"ml-4 p-1 rounded-md hover:bg-opacity-20 hover:bg-black focus:outline-none","aria-label":"Close notification",children:(0,a.jsx)(n.Z,{size:16})})]})}):null}},41742:function(e,t,r){r.d(t,{t:function(){return Pagination}});var a=r(52322);r(2784);let Pagination=e=>{let{currentPage:t,totalPages:r,onPageChange:s}=e;if(r<=1)return null;let n=Array.from({length:r},(e,t)=>t+1);return(0,a.jsxs)("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[(0,a.jsx)("button",{onClick:()=>s(Math.max(t-1,1)),disabled:1===t,className:"px-3 py-1 border rounded-md text-sm bg-white hover:bg-gray-50 disabled:opacity-50",children:"Prev"}),n.map(e=>(0,a.jsx)("button",{onClick:()=>s(e),className:"px-3 py-1 border rounded-md text-sm ".concat(t===e?"bg-blue-500 text-white border-blue-500":"bg-white hover:bg-gray-50"),children:e},e)),(0,a.jsx)("button",{onClick:()=>s(Math.min(t+1,r)),disabled:t===r,className:"px-3 py-1 border rounded-md text-sm bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})}},75753:function(e,t,r){r.d(t,{Bw:function(){return g},Ph:function(){return c},Ql:function(){return f},i4:function(){return m},ki:function(){return u}});var a=r(52322),s=r(2784),n=r(35490),l=r(74004),i=r(375),o=r(17259),d=r(93571);let c=n.fC;n.ZA;let u=n.B4,m=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.$G.displayName;let g=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(x,{})]})})});g.displayName=n.VY.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});p.displayName=n.__.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});f.displayName=n.ck.displayName;let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...s})});y.displayName=n.Z0.displayName},18309:function(e,t,r){r.d(t,{i:function(){return Table}});var a=r(52322);function Table(e){let{columns:t,data:r,emptyMessage:s="No records found",onRowClick:n}=e;return(0,a.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:t.map(e=>(0,a.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:e.header},String(e.key)))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:0===r.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:t.length,className:"px-4 py-4 text-center text-gray-500",children:s})}):r.map((e,r)=>{var s;return(0,a.jsx)("tr",{onClick:()=>null==n?void 0:n(e),className:"hover:bg-gray-50 ".concat(n?"cursor-pointer":""),children:t.map(t=>{var r;return(0,a.jsx)("td",{className:"px-4 py-2 text-gray-700",children:t.render?t.render(e[t.key],e):String(null!==(r=e[t.key])&&void 0!==r?r:"")},String(t.key))})},null!==(s=e.id)&&void 0!==s?s:r)})})]})})}r(2784)},13521:function(e,t,r){var a=r(52322),s=r(2784),n=r(63955),l=r(88883),i=r(48359),o=r(50502),d=r(16813),c=r(75753),u=r(95775),m=r(56958);let h=i.Ry({name:i.Z_().min(1,"Name is required"),email:i.Z_().email("Invalid email address").optional().or(i.i0("")),phone:i.Z_().optional(),type:i.Km(["supplier","service_provider","contractor"]).default("supplier"),address:i.Ry({line1:i.Z_().min(1,"Address is required"),line2:i.Z_().optional(),city:i.Z_().min(1,"City is required"),state:i.Z_().min(1,"State is required"),postalCode:i.Z_().min(1,"Postal code is required"),country:i.Z_().min(1,"Country is required")}),gstin:i.Z_().optional(),pan:i.Z_().optional(),paymentTerms:i.Z_().optional()});t.Z=e=>{var t,r,i,x,g,p,f,y,b,v,j,w,N,Z,C,S,A,P;let{vendor:T,onSuccess:k,onCancel:D}=e,{post:E,put:L}=(0,u.h)(),{register:R,handleSubmit:I,control:q,formState:{errors:_,isSubmitting:B},reset:U}=(0,n.cI)({resolver:(0,l.F)(h),defaultValues:{type:"supplier",address:{country:"India"}}});(0,s.useEffect)(()=>{if(T){var e,t,r,a,s,n;U({name:T.name,email:T.email||"",phone:T.phone||"",type:T.type,gstin:T.gstin||"",pan:T.pan||"",paymentTerms:T.paymentTerms||"",address:{line1:(null===(e=T.billingAddress)||void 0===e?void 0:e.line1)||"",line2:(null===(t=T.billingAddress)||void 0===t?void 0:t.line2)||"",city:(null===(r=T.billingAddress)||void 0===r?void 0:r.city)||"",state:(null===(a=T.billingAddress)||void 0===a?void 0:a.state)||"",postalCode:(null===(s=T.billingAddress)||void 0===s?void 0:s.postalCode)||"",country:(null===(n=T.billingAddress)||void 0===n?void 0:n.country)||"India"}})}},[T,U]);let onSubmit=async e=>{try{let t={...e,email:e.email||void 0,gstin:e.gstin||void 0,pan:e.pan||void 0};(null==T?void 0:T.id)?(await L("/api/vendors/".concat(T.id),t),m.Am.success("Vendor updated successfully")):(await E("/api/vendors",t),m.Am.success("Vendor created successfully")),k()}catch(e){m.Am.error((null==e?void 0:e.message)||"Failed to save vendor")}};return(0,a.jsxs)("form",{onSubmit:I(onSubmit),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(d.I,{label:"Vendor Name",...R("name"),error:null===(t=_.name)||void 0===t?void 0:t.message,disabled:B,required:!0}),(0,a.jsx)(n.Qr,{name:"type",control:q,render:e=>{let{field:t}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Vendor Type"}),(0,a.jsxs)(c.Ph,{value:t.value,onValueChange:t.onChange,disabled:B,children:[(0,a.jsx)(c.i4,{className:"w-full",children:(0,a.jsx)(c.ki,{placeholder:"Select Vendor Type"})}),(0,a.jsxs)(c.Bw,{children:[(0,a.jsx)(c.Ql,{value:"supplier",children:"Supplier"}),(0,a.jsx)(c.Ql,{value:"service_provider",children:"Service Provider"}),(0,a.jsx)(c.Ql,{value:"contractor",children:"Contractor"})]})]})]})}}),_.type&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:_.type.message})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(d.I,{label:"Email",type:"email",...R("email"),error:null===(r=_.email)||void 0===r?void 0:r.message,disabled:B}),(0,a.jsx)(d.I,{label:"Phone (e.g., 9876543210)",...R("phone"),error:null===(i=_.phone)||void 0===i?void 0:i.message,disabled:B})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(d.I,{label:"Tax ID (e.g., 22AAAAA0000A1Z5)",...R("gstin"),error:null===(x=_.gstin)||void 0===x?void 0:x.message,disabled:B}),(0,a.jsx)(d.I,{label:"PAN (e.g.,ABCDE1234F)",...R("pan"),error:null===(g=_.pan)||void 0===g?void 0:g.message,disabled:B})]}),(0,a.jsx)(d.I,{label:"Payment Terms",...R("paymentTerms"),error:null===(p=_.paymentTerms)||void 0===p?void 0:p.message,disabled:B,placeholder:"e.g., Net 30, Due on receipt"}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsx)(d.I,{label:"Address Line 1",...R("address.line1"),error:null===(y=_.address)||void 0===y?void 0:null===(f=y.line1)||void 0===f?void 0:f.message,disabled:B,required:!0}),(0,a.jsx)(d.I,{label:"Address Line 2",...R("address.line2"),error:null===(v=_.address)||void 0===v?void 0:null===(b=v.line2)||void 0===b?void 0:b.message,disabled:B}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(d.I,{label:"City",...R("address.city"),error:null===(w=_.address)||void 0===w?void 0:null===(j=w.city)||void 0===j?void 0:j.message,disabled:B,required:!0}),(0,a.jsx)(d.I,{label:"State",...R("address.state"),error:null===(Z=_.address)||void 0===Z?void 0:null===(N=Z.state)||void 0===N?void 0:N.message,disabled:B,required:!0}),(0,a.jsx)(d.I,{label:"Pincode (e.g., 560001)",...R("address.postalCode"),error:null===(S=_.address)||void 0===S?void 0:null===(C=S.postalCode)||void 0===C?void 0:C.message,disabled:B,required:!0}),(0,a.jsx)(d.I,{label:"Country",...R("address.country"),error:null===(P=_.address)||void 0===P?void 0:null===(A=P.country)||void 0===A?void 0:A.message,disabled:B,required:!0})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:D,disabled:B,children:"Cancel"}),(0,a.jsx)(o.z,{type:"submit",isLoading:B,children:T?"Update Vendor":"Create Vendor"})]})]})}},96213:function(e,t,r){var a=r(52322),s=r(2784),n=r(18309),l=r(95775),i=r(56958),o=r(41742);t.Z=e=>{let{onEditVendor:t}=e,[r,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(!0),[m,h]=(0,s.useState)({page:1,limit:10,total:0,pages:0}),{get:x,del:g}=(0,l.h)(),p=(0,s.useCallback)(async()=>{try{let e=await x("/api/vendors?page=".concat(m.page,"&limit=").concat(m.limit));d(e.data),h(e.pagination)}catch(e){i.Am.error((null==e?void 0:e.message)||"Failed to load vendors ❌")}finally{u(!1)}},[x,m.page,m.limit]);(0,s.useEffect)(()=>{p()},[p]);let handleDelete=async e=>{if(confirm("Are you sure you want to delete this vendor?"))try{await g("/api/vendors/".concat(e)),i.Am.success("Vendor deleted successfully \uD83D\uDDD1️"),p()}catch(e){i.Am.error((null==e?void 0:e.message)||"Failed to delete vendor ❌")}},f=[{key:"name",header:"Vendor Name",render:(e,t)=>{var r;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-green-500 flex items-center justify-center text-white font-bold",children:e.charAt(0)}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-500 capitalize",children:null===(r=t.type)||void 0===r?void 0:r.replace("_"," ")})]})]})}},{key:"email",header:"Email"},{key:"phone",header:"Phone"},{key:"outstandingBalance",header:"Balance",render:e=>(0,a.jsxs)("span",{className:e>0?"text-red-600 font-medium":"text-green-600",children:["₹",e.toLocaleString()]})},{key:"createdAt",header:"Added On",render:e=>new Date(e).toLocaleDateString()},{key:"actions",header:"Actions",render:(e,r)=>(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>t(r),className:"text-blue-600 hover:text-blue-900 font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>handleDelete(r.id),className:"text-red-600 hover:text-red-900 font-medium",children:"Delete"})]})}];return c?(0,a.jsx)("div",{children:"Loading vendors..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)(n.i,{columns:f,data:r,emptyMessage:"No vendors found"}),m.pages>1&&(0,a.jsx)(o.t,{currentPage:m.page,totalPages:m.pages,onPageChange:e=>{h(t=>({...t,page:e}))}})]})}},95775:function(e,t,r){r.d(t,{h:function(){return useApi}});var a=r(2784),s=r(93542);let useApi=()=>{let[e,t]=(0,a.useState)({data:null,loading:!1,error:null}),r=s.env.NEXT_PUBLIC_API_URL||"http://192.168.29.17:3001",n=(0,a.useCallback)(async(e,a)=>{t(e=>({...e,loading:!0,error:null}));try{let s=localStorage.getItem("authToken"),n=await fetch("".concat(r).concat(e),{headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...null==a?void 0:a.headers},...a});if(!n.ok){let e="HTTP error! status: ".concat(n.status);try{let t=await n.json();Array.isArray(t.errors)?e=t.errors.join(", "):t.error?e=t.error:t.message&&(e=t.message)}catch(e){}throw Error(e)}let l=null,i=await n.text();if(i)try{l=JSON.parse(i)}catch(e){l=i}return t({data:l,loading:!1,error:null}),l}catch(r){let e=(null==r?void 0:r.message)||("string"==typeof r?r:"An unknown error occurred");throw t({data:null,loading:!1,error:e}),Error(e)}},[]),l=(0,a.useCallback)(e=>n(e,{method:"GET"}),[n]),i=(0,a.useCallback)((e,t)=>n(e,{method:"POST",body:JSON.stringify(t)}),[n]),o=(0,a.useCallback)((e,t)=>n(e,{method:"PUT",body:JSON.stringify(t)}),[n]),d=(0,a.useCallback)((e,t)=>n(e,{method:"PATCH",body:JSON.stringify(t)}),[n]),c=(0,a.useCallback)(e=>n(e,{method:"DELETE"}),[n]),getBlob=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("authToken"),s=localStorage.getItem("currentTenant"),n=null;try{if(s){let e=JSON.parse(s);n=e.subdomain||e.id||null}}catch(e){}let l=await fetch("".concat(r).concat(e),{method:"GET",headers:{...a?{Authorization:"Bearer ".concat(a)}:{},...n?{"X-Tenant-Subdomain":n}:{},...t.headers}});if(!l.ok){let e="HTTP error! status: ".concat(l.status);try{let t=await l.json();t.error?e=t.error:t.message&&(e=t.message)}catch(e){}throw Error(e)}return await l.blob()};return{...e,get:l,post:i,put:o,patch:d,del:c,getBlob}}},59058:function(e,t,r){r.d(t,{a:function(){return useAuth}});var a=r(1505),s=r(78e3),n=r(5632);let useAuth=()=>{let e=(0,a.TL)(),t=(0,n.useRouter)(),r=(0,a.CG)(s.HF),l=(0,a.CG)(s.D0),i=(0,a.CG)(s.AP),o=(null==r?void 0:r.tenantId)||null;return{user:r,token:l,tenantId:o,isLoading:i,isAuthenticated:!!r&&!!l,logout:()=>{try{e((0,s.kS)()),t.push("/login")}catch(e){}}}}},93571:function(e,t,r){r.d(t,{cn:function(){return cn},p6:function(){return formatDate},xG:function(){return formatCurrency}});var a=r(6277),s=r(57851);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m)((0,a.W)(t))}function formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function formatDate(e){let t="string"==typeof e?new Date(e):e;return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},45366:function(e,t,r){r.d(t,{YA:function(){return n},_w:function(){return l},l4:function(){return i}});var a=r(32684);let s=a.h.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"/auth/login",method:"POST",body:e}),invalidatesTags:["User"]}),superUserLogin:e.mutation({query:e=>({url:"/auth/super-user-login",method:"POST",body:e}),invalidatesTags:["User"]}),register:e.mutation({query:e=>({url:"/auth/register",method:"POST",body:e})}),getCurrentUser:e.query({query:()=>"/auth/me",providesTags:["User"]}),forgotPassword:e.mutation({query:e=>({url:"/auth/forgot-password",method:"POST",body:e})}),resetPassword:e.mutation({query:e=>{let{token:t,password:r}=e;return{url:"/auth/reset-password/".concat(t),method:"POST",body:{password:r}}}}),updateProfile:e.mutation({query:e=>({url:"/auth/profile",method:"PUT",body:e}),invalidatesTags:["User"]})})}),{useLoginMutation:n,useSuperUserLoginMutation:l,useRegisterMutation:i,useGetCurrentUserQuery:o,useForgotPasswordMutation:d,useResetPasswordMutation:c,useUpdateProfileMutation:u}=s},13111:function(e,t,r){r.d(t,{A1:function(){return l},GJ:function(){return c},h4:function(){return i},jN:function(){return u},oC:function(){return o},qD:function(){return m},uo:function(){return d},xu:function(){return n}});var a=r(32684);let s=a.h.injectEndpoints({endpoints:e=>({getSubscription:e.query({query:()=>"/billing/subscription",providesTags:["Subscription"]}),updateSubscription:e.mutation({query:e=>({url:"/billing/subscription",method:"PUT",body:e}),invalidatesTags:["Subscription"]}),getPaymentMethods:e.query({query:()=>"/billing/payment-methods",providesTags:["PaymentMethods"]}),addPaymentMethod:e.mutation({query:e=>({url:"/billing/payment-methods",method:"POST",body:e}),invalidatesTags:["PaymentMethods"]}),removePaymentMethod:e.mutation({query:e=>({url:"/billing/payment-methods/".concat(e),method:"DELETE"}),invalidatesTags:["PaymentMethods"]}),setDefaultPaymentMethod:e.mutation({query:e=>({url:"/billing/payment-methods/".concat(e,"/default"),method:"POST"}),invalidatesTags:["PaymentMethods"]}),getBillingHistory:e.query({query:()=>"/billing/history"}),downloadInvoice:e.mutation({query:e=>({url:"/billing/invoices/".concat(e,"/download"),method:"GET",responseHandler:e=>e.blob()})})})}),{useGetSubscriptionQuery:n,useUpdateSubscriptionMutation:l,useGetPaymentMethodsQuery:i,useAddPaymentMethodMutation:o,useRemovePaymentMethodMutation:d,useSetDefaultPaymentMethodMutation:c,useGetBillingHistoryQuery:u,useDownloadInvoiceMutation:m}=s},89663:function(e,t,r){var a,s,n,l,i,o;r.d(t,{k9:function(){return s},uC:function(){return n}}),(l=a||(a={})).DRAFT="draft",l.PENDING="pending",l.APPROVED="approved",l.REJECTED="rejected",l.COMPLETED="completed",l.CANCELLED="cancelled",(i=s||(s={})).BASIC="basic",i.PREMIUM="premium",i.ENTERPRISE="enterprise",(o=n||(n={})).MONTHLY="monthly",o.QUARTERLY="quarterly",o.ANNUALLY="annually"}}]);