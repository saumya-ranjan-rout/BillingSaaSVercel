(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{64386:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(55909)}])},55909:function(e,s,t){"use strict";t.r(s);var r=t(52322),l=t(2784),a=t(5632),i=t(39097),n=t.n(i),o=t(63955),c=t(88883),d=t(48359),m=t(1505),u=t(45366),x=t(78e3),h=t(43294),p=t(50502),g=t(91825),b=t(96577),f=t.n(b);let j=d.Ry({email:d.Z_().email("Invalid email address"),password:d.Z_()});s.default=()=>{var e,s;let[t,{isLoading:i}]=(0,u.YA)(),d=(0,m.TL)(),b=(0,a.useRouter)(),v=(0,m.CG)(x.Hn),[w,y]=(0,l.useState)(!1),[N,S]=(0,l.useState)(!1),{register:_,handleSubmit:k,formState:{errors:E},setError:I}=(0,o.cI)({resolver:(0,c.F)(j)});(0,l.useEffect)(()=>{S(!0);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}d((0,x.sT)(null))},[d]),(0,l.useEffect)(()=>{v&&N&&y(!0)},[v,N]);let onSubmit=async e=>{var s,r,l;try{let r=await t({email:e.email,password:e.password}).unwrap();d((0,x.Dj)({user:r.user,token:r.accessToken})),localStorage.setItem("token",r.accessToken),localStorage.setItem("user",JSON.stringify(r.user)),(null===(s=r.user)||void 0===s?void 0:s.tenantId)?"super_admin"==r.user.role?b.replace("/SuperAdminPage"):r.check_subscription?b.replace("/app/dashboard"):b.replace("/app/subscription"):b.replace("/auth/login")}catch(e){(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.errors)?Object.entries(e.data.errors).forEach(e=>{let[s,t]=e;I(s,{type:"server",message:t.join(", ")})}):d((0,x.sT)((null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.message)||"An error occurred during login"));try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}};return N?(0,r.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center bg-[#f2f4ff] px-4",children:[(0,r.jsx)("div",{className:"absolute top-6 right-6",children:(0,r.jsx)(n(),{href:"/auth/super-user-login",children:(0,r.jsx)("button",{className:"px-5 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-medium text-sm",children:"Super User Login"})})}),(0,r.jsxs)("div",{className:"w-full max-w-6xl bg-white rounded-3xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"p-12 bg-gradient-to-b from-[#6b4efc] to-[#386bfd] text-white flex flex-col justify-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Welcome back"}),(0,r.jsx)("p",{className:"text-lg opacity-90 mb-6",children:"Sign in to manage billing, invoices, customers and subscriptions."}),(0,r.jsxs)("ul",{className:"space-y-3 text-white text-sm opacity-95",children:[(0,r.jsx)("li",{children:"• Secure & encrypted"}),(0,r.jsx)("li",{children:"• Role-based access control"}),(0,r.jsx)("li",{children:"• Audit logs & analytics"})]}),(0,r.jsx)("div",{className:"mt-10 w-56 h-56 relative mx-auto",children:(0,r.jsx)(f(),{src:"/login-illustrations.png",alt:"Illustration",fill:!0,style:{objectFit:"contain"}})})]}),(0,r.jsx)("div",{className:"p-10 md:p-14 flex items-center",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(f(),{src:"/logo.png",alt:"Logo",width:120,height:120,className:"object-contain"})}),(0,r.jsx)("h2",{className:"text-3xl font-semibold text-slate-900 text-center",children:"Sign in to your account"}),(0,r.jsxs)("p",{className:"mt-2 mb-8 text-center text-sm text-slate-600",children:["Or"," ",(0,r.jsx)(n(),{href:"/auth/register",className:"text-blue-600 hover:underline",children:"create a new account"})]}),(0,r.jsxs)("form",{onSubmit:k(onSubmit),className:"space-y-6",children:[(0,r.jsx)(h.Z,{id:"email",type:"email",label:"Email address",autoComplete:"email",required:!0,error:null===(e=E.email)||void 0===e?void 0:e.message,..._("email")}),(0,r.jsx)(h.Z,{id:"password",type:"password",label:"Password",autoComplete:"current-password",required:!0,error:null===(s=E.password)||void 0===s?void 0:s.message,..._("password")}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mt-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-slate-700",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(0,r.jsx)("span",{children:"Remember me"})]}),(0,r.jsx)(n(),{href:"/auth/forgot-password",className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,r.jsx)(p.z,{type:"submit",disabled:i,isLoading:i,className:"w-full",children:"Sign in"})]}),(0,r.jsxs)("p",{className:"mt-6 text-center text-sm text-slate-500",children:["By signing in you agree to our"," ",(0,r.jsx)(n(),{href:"/terms",className:"text-blue-600 hover:underline",children:"Terms"})," ","and"," ",(0,r.jsx)(n(),{href:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]}),N&&(0,r.jsx)(g.Z,{show:w,onClose:()=>y(!1),message:v||"",type:"error"})]})})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-700"})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=64386)}),_N_E=e.O()}]);