(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5250],{13005:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/super-user-login",function(){return t(29208)}])},29208:function(e,s,t){"use strict";t.r(s);var a=t(52322),l=t(2784),r=t(5632),n=t(39097),i=t.n(n),o=t(63955),c=t(88883),d=t(48359),m=t(1505),u=t(45366),h=t(78e3),x=t(43294),p=t(50502),f=t(91825),g=t(75753),j=t(95775),b=t(96577),v=t.n(b);let w=d.Ry({tenant:d.Z_(),email:d.Z_().email("Invalid email address"),password:d.Z_()});s.default=()=>{var e,s;let{get:t}=(0,j.h)(),[n,{isLoading:d}]=(0,u._w)(),b=(0,m.TL)(),N=(0,r.useRouter)(),y=(0,m.CG)(h.Hn),[S,_]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1),[C,T]=(0,l.useState)(""),[I,L]=(0,l.useState)(""),[Z,P]=(0,l.useState)([]),[F,O]=(0,l.useState)(!0),{register:R,handleSubmit:A,formState:{errors:D},setError:q,setValue:M}=(0,o.cI)({resolver:(0,c.F)(w)});(0,l.useEffect)(()=>{E(!0);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}b((0,h.sT)(null))},[b]),(0,l.useEffect)(()=>{y&&k&&_(!0)},[y,k]);let fetchData=async()=>{O(!0);try{let e=await t("/api/auth/all-tenants");P(e||[]),(0,h.sT)(null)}catch(e){(0,h.sT)(e.message||"Failed to fetch data")}finally{O(!1)}};(0,l.useEffect)(()=>{fetchData()},[]);let onSubmit=async e=>{var s,t,a;try{let t=await n({tenant:e.tenant,email:e.email,password:e.password}).unwrap();b((0,h.Dj)({user:t.user,token:t.accessToken})),localStorage.setItem("token",t.accessToken),localStorage.setItem("user",JSON.stringify(t.user)),(null===(s=t.user)||void 0===s?void 0:s.tenantId)?"super_admin"==t.user.role?N.replace("/SuperAdminPage"):N.replace("/app/dashboard"):N.replace("/auth/super-user-login")}catch(e){(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.errors)?Object.entries(e.data.errors).forEach(e=>{let[s,t]=e;q(s,{type:"server",message:t.join(", ")})}):b((0,h.sT)((null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)||"An error occurred during login"));try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}},U=Z.filter(e=>e.businessName.toLowerCase().includes(I.toLowerCase()));return k?(0,a.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center bg-[#f2f4ff] px-4",children:[(0,a.jsx)("div",{className:"absolute top-6 right-6",children:(0,a.jsx)(i(),{href:"/auth/login",children:(0,a.jsx)("button",{className:"px-5 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-medium text-sm",children:"Regular Login"})})}),(0,a.jsxs)("div",{className:"w-full max-w-6xl bg-white rounded-3xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-12 bg-gradient-to-b from-[#6b4efc] to-[#386bfd] text-white flex flex-col justify-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Super User Access"}),(0,a.jsx)("p",{className:"text-lg opacity-90 mb-6",children:"Manage tenants, settings, billing and elevated controls."}),(0,a.jsxs)("ul",{className:"space-y-3 text-white text-sm opacity-95",children:[(0,a.jsx)("li",{children:"• Multi-tenant access"}),(0,a.jsx)("li",{children:"• Elevated permissions"}),(0,a.jsx)("li",{children:"• Secure & encrypted login"})]}),(0,a.jsx)("div",{className:"mt-10 w-56 h-56 relative mx-auto",children:(0,a.jsx)(v(),{src:"/superuser-illustration.png",alt:"Super user illustration",fill:!0,style:{objectFit:"contain"}})})]}),(0,a.jsx)("div",{className:"p-10 md:p-14 flex items-center",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)(v(),{src:"/logo.png",alt:"Logo",width:120,height:120,className:"object-contain"})}),(0,a.jsx)("h2",{className:"text-3xl font-semibold text-center text-slate-900",children:"Super User Login"}),(0,a.jsx)("p",{className:"mt-2 mb-8 text-center text-sm text-slate-600",children:"Choose a tenant and enter your credentials."}),(0,a.jsxs)("form",{onSubmit:A(onSubmit),className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tenant"}),(0,a.jsxs)(g.Ph,{onValueChange:e=>M("tenant",e),children:[(0,a.jsx)(g.i4,{className:"w-full",children:(0,a.jsx)(g.ki,{placeholder:"Select Tenant"})}),(0,a.jsxs)(g.Bw,{children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)("input",{type:"text",className:"w-full px-2 py-1 border rounded-md",placeholder:"Search tenant...",value:I,onChange:e=>L(e.target.value)})}),U.map(e=>(0,a.jsx)(g.Ql,{value:e.id,children:e.businessName},e.id))]})]}),D.tenant&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:D.tenant.message})]}),(0,a.jsx)(x.Z,{id:"email",type:"email",label:"Email address",autoComplete:"email",required:!0,error:null===(e=D.email)||void 0===e?void 0:e.message,...R("email")}),(0,a.jsx)(x.Z,{id:"password",type:"password",label:"Password",autoComplete:"current-password",required:!0,error:null===(s=D.password)||void 0===s?void 0:s.message,...R("password")}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{children:"Remember me"})]}),(0,a.jsx)(i(),{href:"/auth/forgot-password",className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),(0,a.jsx)(p.z,{type:"submit",className:"w-full",disabled:d,isLoading:d,children:"Sign in"})]}),k&&(0,a.jsx)(f.Z,{show:S,onClose:()=>_(!1),message:y||"",type:"error"})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("div",{className:"animate-spin h-12 w-12 border-t-2 border-b-2 border-gray-600 rounded-full"})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=13005)}),_N_E=e.O()}]);