(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{62219:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return a(42549)}])},42549:function(e,s,a){"use strict";a.r(s);var i=a(52322),n=a(2784),r=a(39097),t=a.n(r),l=a(5632),o=a(63955),d=a(88883),c=a(48359),m=a(1505),u=a(45366),x=a(50502),p=a(43294),g=a(91825);let f=c.Ry({accountType:c.Km(["admin","professional"]),businessName:c.Z_().min(2,"Business name is required"),subdomain:c.Z_().optional(),firstName:c.Z_().min(2,"First name is required"),lastName:c.Z_().min(2,"Last name is required"),email:c.Z_().email("Invalid email address"),password:c.Z_().min(6,"Password must be at least 6 characters"),professionType:c.Km(["CA","CS","Advocate","TaxConsultant"]).optional(),licenseNo:c.Z_().optional(),pan:c.Z_().min(10,"PAN number is required").regex(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Invalid PAN number format"),gst:c.Z_().min(15,"GST number is required").regex(/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,"Invalid GST number format")}).refine(e=>{if(e.professionType&&e.licenseNo){let s={CA:/^[A-Z]{2}\d{4,6}$/,CS:/^(ACS|FCS)\d{4,6}$/,Advocate:/^[A-Z]{2,3}\/\d{3,6}\/\d{4}$/,TaxConsultant:/^[A-Z]{2,4}\d{3,6}$/}[e.professionType];return!s||s.test(e.licenseNo)}return!0},{message:"Enter a valid License No based on profession type",path:["licenseNo"]});s.default=()=>{var e,s,a,r,c,h,b,N,v;let y=(0,l.useRouter)();(0,m.TL)();let[j,{isLoading:w}]=(0,u.l4)(),[A,C]=(0,n.useState)(!1),[T,Z]=(0,n.useState)(""),[S,_]=(0,n.useState)(!1),{register:P,handleSubmit:L,watch:E,getValues:k,formState:{errors:F}}=(0,o.cI)({resolver:(0,d.F)(f)}),$=E("accountType");(0,n.useEffect)(()=>{_(!0)},[]);let onSubmit=async e=>{try{let s=await j(e).unwrap();if(null==s?void 0:s.user)Z("Registration successful! You can now sign in."),C(!0),await new Promise(e=>setTimeout(e,2e3)),y.push("/auth/login");else throw Error("Registration failed. Please try again.")}catch(e){var s;Z((null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.error)||"Something went wrong"),C(!0)}};return S?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-tl from-gray-100 via-blue-50 to-indigo-100",children:(0,i.jsx)("div",{className:"w-full max-w-4xl bg-white shadow-xl rounded-lg p-10",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8",children:[(0,i.jsx)("div",{className:"md:col-span-4 flex flex-col items-center justify-center bg-gradient-to-r from-blue-600 to-purple-700 text-white p-8 rounded-lg shadow-lg",children:(0,i.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,i.jsx)("img",{src:"/logo.png",alt:"Company Logo",className:"w-32 h-32 object-contain"}),(0,i.jsx)("h1",{className:"text-4xl font-bold tracking-wide",children:"Create Account"}),(0,i.jsx)("p",{className:"text-lg text-center opacity-80",children:"Start managing your business with our billing platform."})]})}),(0,i.jsx)("div",{className:"md:col-span-8 flex items-center justify-center bg-gray-50 p-8 rounded-lg shadow-lg",children:(0,i.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"mt-2 text-center text-3xl font-extrabold text-gray-900",children:"Register your Account"}),(0,i.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,i.jsx)(t(),{href:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})]}),(0,i.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:L(onSubmit),children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(p.Z,{id:"firstName",label:"First Name",error:null===(e=F.firstName)||void 0===e?void 0:e.message,...P("firstName")}),(0,i.jsx)(p.Z,{id:"lastName",label:"Last Name",error:null===(s=F.lastName)||void 0===s?void 0:s.message,...P("lastName")}),(0,i.jsx)(p.Z,{id:"businessName",label:"Business Name",error:null===(a=F.businessName)||void 0===a?void 0:a.message,...P("businessName")}),(0,i.jsx)(p.Z,{id:"subdomain",label:"Subdomain",error:null===(r=F.subdomain)||void 0===r?void 0:r.message,...P("subdomain")}),(0,i.jsx)(p.Z,{id:"email",type:"email",label:"Email Address",error:null===(c=F.email)||void 0===c?void 0:c.message,...P("email")}),(0,i.jsx)(p.Z,{id:"password",type:"password",label:"Password",error:null===(h=F.password)||void 0===h?void 0:h.message,...P("password")})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Type"}),(0,i.jsxs)("select",{...P("accountType"),className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"admin",children:"Business User"}),(0,i.jsx)("option",{value:"professional",children:"Professional User(Lawyer, CS, CA, Tax Consultant)"})]}),F.accountType&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.accountType.message})]}),"professional"===$&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profession Type"}),(0,i.jsxs)("select",{...P("professionType"),className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Select Profession"}),(0,i.jsx)("option",{value:"CA",children:"Chartered Accountant (CA)"}),(0,i.jsx)("option",{value:"CS",children:"Company Secretary (CS)"}),(0,i.jsx)("option",{value:"Advocate",children:"Advocate"}),(0,i.jsx)("option",{value:"TaxConsultant",children:"Tax Consultant"})]}),F.professionType&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.professionType.message})]}),(0,i.jsx)(p.Z,{id:"licenseNo",label:"License No (e.g., CA: CA12345 | CS: ACS12345 | Lawyer: UP/1234/2015 | TaxConsultant: TXC1234)",error:null===(b=F.licenseNo)||void 0===b?void 0:b.message,...P("licenseNo")}),(0,i.jsx)(x.z,{type:"button",className:"w-full bg-green-600 text-white mt-2",onClick:async()=>{let e=k("licenseNo"),s=k("professionType");if(!e||!s){alert("Select profession and enter license number");return}try{let a=await fetch("/api/auth/validate-license",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({professionType:s,licenseNo:e})}),i=await a.json();i.success?alert("✅ Verified: ".concat(i.data.name||"Valid License")):alert("❌ ".concat(i.message))}catch(e){alert("Verification failed, try again later")}},children:"Verify License"})]}),(0,i.jsx)(p.Z,{id:"pan",label:"PAN No. (e.g.,ABCDE1234F)",error:null===(N=F.pan)||void 0===N?void 0:N.message,...P("pan")}),(0,i.jsx)(p.Z,{id:"gst",label:"GST No. (e.g.,22AAAAA0000A1Z5)",error:null===(v=F.gst)||void 0===v?void 0:v.message,...P("gst")})]})]}),(0,i.jsx)(x.z,{type:"submit",className:"w-full",disabled:w,isLoading:w,children:"Create Account"})]}),S&&(0,i.jsx)(g.Z,{show:A,onClose:()=>C(!1),message:T,type:T.includes("successful")?"success":"error"})]})})]})})}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=62219)}),_N_E=e.O()}]);