(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5250],{13005:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/super-user-login",function(){return t(29208)}])},29208:function(e,s,t){"use strict";t.r(s);var a=t(52322),l=t(2784),r=t(5632),n=t(39097),i=t.n(n),o=t(63955),c=t(88883),d=t(48359),m=t(1505),u=t(45366),x=t(78e3),h=t(43294),g=t(50502),p=t(91825),f=t(75753),j=t(95775);let b=d.Ry({tenant:d.Z_(),email:d.Z_().email("Invalid email address"),password:d.Z_()});s.default=()=>{var e,s;let{get:t}=(0,j.h)(),[n,{isLoading:d}]=(0,u._w)(),v=(0,m.TL)(),w=(0,r.useRouter)(),y=(0,m.CG)(x.Hn),[N,S]=(0,l.useState)(!1),[_,k]=(0,l.useState)(!1),[C,E]=(0,l.useState)(""),[T,I]=(0,l.useState)(""),[Z,L]=(0,l.useState)([]),[O,P]=(0,l.useState)(!0),{register:R,handleSubmit:D,formState:{errors:q},setError:A,setValue:B}=(0,o.cI)({resolver:(0,c.F)(b)});(0,l.useEffect)(()=>{k(!0);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}v((0,x.sT)(null))},[v]),(0,l.useEffect)(()=>{y&&_&&S(!0)},[y,_]);let fetchData=async()=>{P(!0);try{let e=await t("/api/auth/all-tenants");L(e||[]),(0,x.sT)(null)}catch(e){(0,x.sT)(e.message||"Failed to fetch data")}finally{P(!1)}};(0,l.useEffect)(()=>{fetchData()},[]);let onSubmit=async e=>{var s,t,a;try{let t=await n({tenant:e.tenant,email:e.email,password:e.password}).unwrap();v((0,x.Dj)({user:t.user,token:t.accessToken})),localStorage.setItem("token",t.accessToken),localStorage.setItem("user",JSON.stringify(t.user)),(null===(s=t.user)||void 0===s?void 0:s.tenantId)?"super_admin"==t.user.role?w.replace("/SuperAdminPage"):w.replace("/app/dashboard"):w.replace("/auth/super-user-login")}catch(e){(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.errors)?Object.entries(e.data.errors).forEach(e=>{let[s,t]=e;A(s,{type:"server",message:t.join(", ")})}):v((0,x.sT)((null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)||"An error occurred during login"));try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}},F=Z.filter(e=>e.businessName.toLowerCase().includes(T.toLowerCase()));return _?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-tl from-gray-100 via-blue-50 to-indigo-100",children:(0,a.jsx)("div",{className:"w-full max-w-4xl bg-white shadow-xl rounded-lg p-10",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"flex flex-col items-center justify-center bg-gradient-to-r from-blue-500 to-purple-600 text-white p-8 rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"Company Logo",className:"w-32 h-32 object-contain"}),(0,a.jsx)("h1",{className:"text-4xl font-bold tracking-wide",children:"Welcome Back!"}),(0,a.jsx)("p",{className:"text-lg text-center opacity-80",children:"Manage your billing, invoices, and customers effortlessly."})]})}),(0,a.jsx)("div",{className:"flex items-center justify-center bg-gray-50 p-8 rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-2 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,a.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,a.jsx)(i(),{href:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Regular login"})]})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:D(onSubmit),children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tenant"}),(0,a.jsxs)(f.Ph,{onValueChange:e=>{E(e),B("tenant",e)},value:C,children:[(0,a.jsx)(f.i4,{className:"w-full",children:(0,a.jsx)(f.ki,{placeholder:"Select Tenant"})}),(0,a.jsxs)(f.Bw,{children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)("input",{type:"text",className:"w-full px-2 py-1 border rounded-md",placeholder:"Search tenant...",value:T,onChange:e=>I(e.target.value)})}),F.map(e=>(0,a.jsx)(f.Ql,{value:e.id,children:e.businessName},e.id))]})]}),q.tenant&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:q.tenant.message})]}),(0,a.jsx)(h.Z,{id:"email",type:"email",label:"Email address",autoComplete:"email",required:!0,error:null===(e=q.email)||void 0===e?void 0:e.message,...R("email")}),(0,a.jsx)(h.Z,{id:"password",type:"password",label:"Password",autoComplete:"current-password",required:!0,error:null===(s=q.password)||void 0===s?void 0:s.message,...R("password")})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:"Remember me"})]})}),(0,a.jsx)(g.z,{type:"submit",className:"w-full",disabled:d,isLoading:d,children:"Sign in"})]}),_&&(0,a.jsx)(p.Z,{show:N,onClose:()=>S(!1),message:y||"",type:"error"})]})})]})})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-blue-500 to-purple-600",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=13005)}),_N_E=e.O()}]);