(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3025],{64437:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/billing",function(){return i(69783)}])},69783:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return billing}});var t=i(52322),a=i(2784),s=i(60418),r=i(50502),billing_SubscriptionPlanCard=e=>{let{plan:n,onSubscribe:i,loading:a=!1,currentPlan:s=!1}=e;return(0,t.jsxs)("div",{className:"border rounded-lg p-6 ".concat(n.isPopular?"border-blue-500 border-2 shadow-lg":"border-gray-200"," ").concat(s?"bg-blue-50":"bg-white"),children:[n.isPopular&&(0,t.jsx)("div",{className:"bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-full inline-block mb-4",children:"MOST POPULAR"}),s&&(0,t.jsx)("div",{className:"bg-green-100 text-green-800 text-xs font-bold px-3 py-1 rounded-full inline-block mb-4",children:"CURRENT PLAN"}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:n.name}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold",children:["₹",n.price]}),(0,t.jsxs)("span",{className:"text-gray-600",children:["/",n.billingPeriod]})]}),(0,t.jsx)("ul",{className:"space-y-2 mb-6",children:n.features.map((e,n)=>(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-green-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e]},n))}),(0,t.jsx)(r.z,{onClick:i,isLoading:a,variant:s?"outline":"primary",className:"w-full",disabled:s,children:s?"Current Plan":"Subscribe Now"})]})};let loadRazorpay=()=>new Promise((e,n)=>{if(window.Razorpay){e();return}let i=document.createElement("script");i.src="https://checkout.razorpay.com/v1/checkout.js",i.async=!0,i.onload=()=>{e()},i.onerror=()=>{n(Error("Razorpay SDK failed to load"))},document.body.appendChild(i)});var billing_PaymentForm=e=>{let{amount:n,currency:i,description:s,onSuccess:l,onFailure:c,loading:o=!1}=e,[d,u]=(0,a.useState)(!1),handlePayment=async()=>{u(!0);try{await loadRazorpay();let e=new window.Razorpay({key:"rzp_test_RIzVBhLCVLhGzT",amount:100*n,currency:i,name:"Billing Software SaaS",description:s,handler:async function(e){l(e)},prefill:{name:"Customer Name",email:"customer@example.com",contact:"9999999999"},notes:{description:s},theme:{color:"#2563eb"}});e.open()}catch(e){c(e)}finally{u(!1)}};return(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete Payment"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["₹",n]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s})]}),(0,t.jsxs)(r.z,{onClick:handlePayment,isLoading:d||o,className:"w-full",size:"lg",children:["Pay ₹",n]}),(0,t.jsx)("div",{className:"mt-4 text-center text-xs text-gray-500",children:"Secure payment powered by Razorpay"})]})},l=i(33766),billing=()=>{let[e,n]=(0,a.useState)([]),[i,r]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),fetchPlans=async()=>{try{r(!0);let e=await s.Z.get("/api/subscription-plans"),i=e.data&&e.data.plans&&e.data.plans.length>0?e.data.plans:[{id:"basic",name:"Basic",price:29,currency:"INR",billingPeriod:"month",features:["Up to 10 users","100 invoices per month","Basic reporting","Email support","1GB storage"]},{id:"professional",name:"Professional",price:79,currency:"INR",billingPeriod:"month",features:["Up to 50 users","Unlimited invoices","Advanced reporting","Priority support","10GB storage","API access","Custom branding"]},{id:"enterprise",name:"Enterprise",price:199,currency:"INR",billingPeriod:"month",features:["Unlimited users","Unlimited invoices","Advanced analytics","24/7 dedicated support","50GB storage","Full API access","White-label solution","SAML SSO"]}];n(i)}catch(e){n([{id:"basic",name:"Basic",price:29,currency:"INR",billingPeriod:"month",features:["Up to 10 users","100 invoices per month","Basic reporting","Email support","1GB storage"]},{id:"professional",name:"Professional",price:79,currency:"INR",billingPeriod:"month",features:["Up to 50 users","Unlimited invoices","Advanced reporting","Priority support","10GB storage","API access","Custom branding"]},{id:"enterprise",name:"Enterprise",price:199,currency:"INR",billingPeriod:"month",features:["Unlimited users","Unlimited invoices","Advanced analytics","24/7 dedicated support","50GB storage","Full API access","White-label solution","SAML SSO"]}])}finally{r(!1)}};(0,a.useEffect)(()=>{fetchPlans()},[]);let handleSubscribe=e=>{o(e)},handlePaymentSuccess=async e=>{if(c)try{u(!0),await s.Z.post("/api/billing/subscriptions",{planType:"tenant",entityId:"current-entity-id",paymentMethod:"card"}),m(!0),o(null)}catch(e){}finally{u(!1)}};return(0,t.jsx)(l.Z,{children:(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Billing & Subscriptions"}),i?(0,t.jsx)("p",{children:"Loading plans..."}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsx)(billing_SubscriptionPlanCard,{plan:e,onSubscribe:()=>handleSubscribe(e),loading:d&&(null==c?void 0:c.id)===e.id},e.id))}),c&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-6 relative",children:[(0,t.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",onClick:()=>o(null),children:"\xd7"}),(0,t.jsx)(billing_PaymentForm,{amount:c.price,currency:c.currency,description:"Subscription: ".concat(c.name),onSuccess:handlePaymentSuccess,onFailure:e=>{alert("Payment failed. Please try again."),o(null)},loading:d})]})}),p&&(0,t.jsx)("div",{className:"mt-6 bg-green-100 text-green-800 p-4 rounded",children:"Payment successful! Your subscription is now active."})]})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=64437)}),_N_E=e.O()}]);