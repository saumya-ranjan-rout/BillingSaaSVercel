(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8230],{11462:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/billing/history",function(){return s(75370)}])},75370:function(e,t,s){"use strict";s.r(t);var a=s(52322),i=s(2784),n=s(33766),l=s(13111),r=s(50502),d=s(76345),c=s(7466),x=s(9464),o=s(93571);t.default=()=>{let{data:e,isLoading:t,error:s}=(0,l.jN)(),[m]=(0,l.qD)(),[p,h]=(0,i.useState)(null),handleDownloadInvoice=async e=>{h(e);try{let t=await m(e).unwrap(),s=new Blob([t],{type:"application/pdf"}),a=window.URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download="invoice-".concat(e,".pdf"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)}catch(e){}finally{h(null)}};return t?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Billing History"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"View and download your past invoices and receipts"}),s&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:"Failed to load billing history. Please try again."}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e&&e.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,o.p6)(e.date)}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center",children:["invoice"===e.type?(0,a.jsx)(d.Z,{size:16,className:"mr-2 text-blue-500"}):(0,a.jsx)(c.Z,{size:16,className:"mr-2 text-green-500"}),e.description]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,o.xG)(e.amount)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("paid"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>handleDownloadInvoice(e.id),disabled:p===e.id,children:p===e.id?"Downloading...":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{size:14,className:"mr-1"}),"Download"]})})})]},e.id))})]})}):(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(c.Z,{size:48,className:"mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No billing history"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your billing history will appear here once you have transactions."})]})})]})})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=11462)}),_N_E=e.O()}]);