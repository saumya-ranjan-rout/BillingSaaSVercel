(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5733],{20256:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/reports/sales",function(){return s(1443)}])},1443:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return SalesReportPage}});var a=s(52322),l=s(2784),r=s(33766),d=s(95775),i=s(56958);function SalesReportPage(){var e,t,s,n;let{get:c}=(0,d.h)(),[x,o]=(0,l.useState)(null),[m,p]=(0,l.useState)(!0),[u,h]=(0,l.useState)({startDate:"",endDate:""}),g=(0,l.useCallback)(async()=>{try{p(!0);let e=new URLSearchParams({...u.startDate&&{startDate:u.startDate},...u.endDate&&{endDate:u.endDate}}),t=await c("/api/invoices/reports/sales?".concat(e.toString()));o(t)}catch(e){i.Am.error("Failed to load sales report ❌")}finally{p(!1)}},[c,u]);return(0,l.useEffect)(()=>{g()},[g]),(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Sales Report"}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 flex flex-wrap items-end gap-4",children:[(0,a.jsxs)("div",{className:"w-48",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"From Date"}),(0,a.jsx)("input",{type:"date",value:u.startDate,onChange:e=>h(t=>({...t,startDate:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"w-48",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"To Date"}),(0,a.jsx)("input",{type:"date",value:u.endDate,onChange:e=>h(t=>({...t,endDate:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)("button",{onClick:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Filter"})})]}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Invoices"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:null!==(e=null==x?void 0:x.totalInvoices)&&void 0!==e?e:0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Sales"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-indigo-600",children:["₹",(null!==(t=null==x?void 0:x.totalSales)&&void 0!==t?t:0).toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Tax"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:["₹",(null!==(s=null==x?void 0:x.totalTax)&&void 0!==s?s:0).toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Total Discount"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:["₹",(null!==(n=null==x?void 0:x.totalDiscount)&&void 0!==n?n:0).toFixed(2)]})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice No"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tax"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Discount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):(null==x?void 0:x.data)&&x.data.length>0?x.data.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.invoiceNumber}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.customerName}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.issueDate).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-indigo-600",children:["₹",Number(e.totalAmount).toFixed(2)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["₹",Number(e.taxTotal).toFixed(2)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["₹",Number(e.discountTotal).toFixed(2)]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.status})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No records found"})})})]})})]})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=20256)}),_N_E=e.O()}]);