(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3376],{93969:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/invoices",function(){return a(77612)}])},77612:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return invoices}});var i=a(52322),s=a(2784),l=a(33766),n=a(95775),r=a(56958),d=a(18309),o=a(41742),c=a(75753),u=a(65823),m=a(50502),v=a(16813),invoices_InvoiceList=e=>{let{onEditInvoice:t,onViewInvoice:a,refreshKey:l}=e,[x,h]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[j,b]=(0,s.useState)(!0),[y,f]=(0,s.useState)({status:"",type:"",customerId:"",startDate:"",endDate:""}),[N,D]=(0,s.useState)({page:1,limit:10,total:0,pages:0}),{get:I,del:C,getBlob:A}=(0,n.h)(),_=(0,s.useCallback)(async()=>{try{b(!0);let e=new URLSearchParams({page:N.page.toString(),limit:N.limit.toString(),...y.status&&{status:y.status},...y.type&&{type:y.type},...y.customerId&&{customerId:y.customerId},...y.startDate&&{startDate:y.startDate},...y.endDate&&{endDate:y.endDate}}),t=await I("/api/invoices?".concat(e));h(t.data),D(t.pagination)}catch(e){r.Am.error((null==e?void 0:e.message)||"Failed to load invoices")}finally{b(!1)}},[I,N.page,N.limit,y]);(0,s.useEffect)(()=>{let fetchCustomers=async()=>{try{let e=await I("/api/customers?limit=100");g(e.data)}catch(e){}};fetchCustomers()},[I]),(0,s.useEffect)(()=>{_()},[_,l]);let handleDelete=async e=>{if(confirm("Are you sure you want to delete this invoice order?"))try{await C("/api/invoices/".concat(e)),r.Am.success("Invoice deleted successfully \uD83D\uDDD1️"),_()}catch(e){r.Am.error((null==e?void 0:e.message)||"Failed to delete invoice ❌")}},handlePrint=async e=>{try{let t=await A("/api/invoices/".concat(e,"/pdf"));if("application/pdf"!==t.type)throw Error("Invalid PDF response");let a=window.URL.createObjectURL(t),i=window.open(a,"_blank");i||r.Am.error("Popup blocked! Please allow popups to view PDF.")}catch(e){r.Am.error((null==e?void 0:e.message)||"Failed to generate invoice PDF ❌")}},handleFilterChange=(e,t)=>{let a="all"===t?"":t;f(t=>({...t,[e]:a})),D(e=>({...e,page:1}))},getStatusBadge=e=>{let{label:t,variant:a}={draft:{label:"Draft",variant:"outline"},sent:{label:"Sent",variant:"default"},viewed:{label:"Viewed",variant:"warning"},partial:{label:"Partial",variant:"warning"},paid:{label:"Paid",variant:"success"},overdue:{label:"Overdue",variant:"danger"},cancelled:{label:"Cancelled",variant:"outline"}}[e]||{label:e,variant:"outline"};return(0,i.jsx)(u.C,{variant:a,children:t})},getTypeBadge=e=>{let{label:t,variant:a}={standard:{label:"Standard",variant:"default"},proforma:{label:"Proforma",variant:"warning"},credit:{label:"Credit",variant:"success"},debit:{label:"Debit",variant:"danger"}}[e]||{label:e,variant:"outline"};return(0,i.jsx)(u.C,{variant:a,children:t})},S=[{key:"invoiceNumber",header:"Invoice",render:(e,t)=>{var a;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:null===(a=t.customer)||void 0===a?void 0:a.name})]})}},{key:"issueDate",header:"Issue Date",render:e=>new Date(e).toLocaleDateString()},{key:"dueDate",header:"Due Date",render:e=>new Date(e).toLocaleDateString()},{key:"status",header:"Status",render:e=>getStatusBadge(e)},{key:"type",header:"Type",render:e=>getTypeBadge(e)},{key:"totalAmount",header:"Total Amount",render:e=>"₹".concat(e.toLocaleString())},{key:"balanceDue",header:"Balance Due",render:e=>(0,i.jsxs)("span",{className:e>0?"text-red-600 font-medium":"text-green-600",children:["₹",e.toLocaleString()]})},{key:"actions",header:"Actions",render:(e,a)=>(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(m.z,{onClick:()=>handlePrint(a.id),variant:"outline",size:"sm",children:"Print"}),"draft"===a.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.z,{onClick:()=>t(a),variant:"outline",size:"sm",children:"Edit"}),(0,i.jsx)(m.z,{onClick:()=>handleDelete(a.id),variant:"danger",size:"sm",children:"Delete"})]})]})}];return j?(0,i.jsx)("div",{children:"Loading invoices..."}):(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Customer"}),(0,i.jsxs)(c.Ph,{onValueChange:e=>handleFilterChange("customerId",e),value:y.customerId,children:[(0,i.jsx)(c.i4,{children:(0,i.jsx)(c.ki,{placeholder:"All Customers"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"all",children:"All Customers"}),p.map(e=>(0,i.jsx)(c.Ql,{value:e.id,children:e.name},e.id))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status"}),(0,i.jsxs)(c.Ph,{onValueChange:e=>handleFilterChange("status",e),value:y.status,children:[(0,i.jsx)(c.i4,{children:(0,i.jsx)(c.ki,{placeholder:"All Status"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"all",children:"All Status"}),(0,i.jsx)(c.Ql,{value:"draft",children:"Draft"}),(0,i.jsx)(c.Ql,{value:"sent",children:"Sent"}),(0,i.jsx)(c.Ql,{value:"viewed",children:"Viewed"}),(0,i.jsx)(c.Ql,{value:"partial",children:"Partial"}),(0,i.jsx)(c.Ql,{value:"paid",children:"Paid"}),(0,i.jsx)(c.Ql,{value:"overdue",children:"Overdue"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Type"}),(0,i.jsxs)(c.Ph,{onValueChange:e=>handleFilterChange("type",e),value:y.type,children:[(0,i.jsx)(c.i4,{children:(0,i.jsx)(c.ki,{placeholder:"All Types"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"all",children:"All Types"}),(0,i.jsx)(c.Ql,{value:"standard",children:"Standard"}),(0,i.jsx)(c.Ql,{value:"proforma",children:"Proforma"}),(0,i.jsx)(c.Ql,{value:"credit",children:"Credit"}),(0,i.jsx)(c.Ql,{value:"debit",children:"Debit"})]})]})]}),(0,i.jsx)(v.I,{label:"From Date",type:"date",value:y.startDate,onChange:e=>handleFilterChange("startDate",e.target.value)}),(0,i.jsx)(v.I,{label:"To Date",type:"date",value:y.endDate,onChange:e=>handleFilterChange("endDate",e.target.value)})]}),(0,i.jsx)(d.i,{columns:S,data:x,onRowClick:a,emptyMessage:"No invoices found"}),N.pages>1&&(0,i.jsx)(o.t,{currentPage:N.page,totalPages:N.pages,onPageChange:e=>D(t=>({...t,page:e}))})]})},x=a(63955),h=a(88883),p=a(48359),g=a(78255),j=a(18347),b=a(25237),y=a.n(b);let f=y()(()=>Promise.all([a.e(2138),a.e(9226),a.e(9496),a.e(731),a.e(8126),a.e(467),a.e(7240),a.e(5516),a.e(7578),a.e(3707),a.e(7951),a.e(7302),a.e(2968),a.e(6324),a.e(7737),a.e(6051),a.e(3957),a.e(4812),a.e(5323),a.e(747),a.e(6753),a.e(8870),a.e(5041),a.e(6026),a.e(5429),a.e(8498),a.e(4942),a.e(5702),a.e(8922),a.e(8510),a.e(8424),a.e(553),a.e(7226),a.e(269),a.e(6611),a.e(5341),a.e(5111)]).then(a.bind(a,86192)),{loadableGenerated:{webpack:()=>[86192]},ssr:!1}),N=p.Ry({productId:p.Z_().min(1,"Product is required").optional(),description:p.Z_().min(1,"Description is required"),quantity:p.Rx().min(.01,"Quantity must be greater than 0"),unit:p.Z_().min(1,"Unit is required"),unitPrice:p.Rx().min(.01,"Unit price must be positive"),discount:p.Rx().min(0).max(100).default(0),taxRate:p.Rx().min(0).max(100).default(0)}),D=p.Ry({customerName:p.Z_().min(1,"Customer name is required"),customerEmail:p.Z_().email("Invalid email address"),type:p.Km(["standard","proforma","credit","debit"],{required_error:"Invoice type is required",invalid_type_error:"Invoice type is required"}),issueDate:p.Z_().min(1,"Issue date is required"),paymentTerms:p.Km(["due_on_receipt","net_7","net_15","net_30","net_60"],{required_error:"Payment terms are required",invalid_type_error:"Payment terms are required"}),shippingAddress:p.Z_().optional(),billingAddress:p.Z_().optional(),termsAndConditions:p.Z_().optional(),notes:p.Z_().optional(),items:p.IX(N).min(1,"At least one item is required")});var invoices_InvoiceForm=e=>{var t,a,l,d,o,u;let p,b,y;let{invoice:N,onSuccess:I,onCancel:C}=e,[A,_]=(0,s.useState)([]),[S,P]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0),[T,F]=(0,s.useState)(""),[Q,E]=(0,s.useState)(""),{post:q,put:R,get:z}=(0,n.h)(),{register:L,handleSubmit:Z,formState:{errors:B,isSubmitting:V},reset:O,control:U,watch:K,setValue:X}=(0,x.cI)({resolver:(0,h.F)(D),defaultValues:{customerName:"",customerEmail:"",type:"standard",issueDate:new Date().toISOString().split("T")[0],paymentTerms:"net_15",items:[{productId:"",description:"",quantity:1,unit:"pcs",unitPrice:0,discount:0,taxRate:0}]}}),{fields:G,append:M,remove:H}=(0,x.Dq)({control:U,name:"items"}),J=K("items"),W=K("paymentTerms"),Y=K("issueDate");(0,s.useEffect)(()=>{let fetchData=async()=>{try{let[e,t]=await Promise.all([z("/api/customers?limit=200"),z("/api/products?limit=200&isActive=true")]),a=Array.isArray(e)?e:Array.isArray(null==e?void 0:e.data)?e.data:[],i=Array.isArray(t)?t:Array.isArray(null==t?void 0:t.data)?t.data:[];_(a),P(i)}catch(e){r.Am.error("Failed to load form data")}finally{k(!1)}};fetchData()},[z]),(0,s.useEffect)(()=>{if(N){var e,t,a;O({customerName:(null===(e=N.customer)||void 0===e?void 0:e.name)||"",customerEmail:(null===(t=N.customer)||void 0===t?void 0:t.email)||"",type:N.type,issueDate:N.issueDate.split("T")[0],paymentTerms:N.paymentTerms,shippingAddress:N.shippingAddress,billingAddress:N.billingAddress,termsAndConditions:N.termsAndConditions,notes:N.notes,items:(null!==(a=N.items)&&void 0!==a?a:[]).map(e=>{var t,a,i;return{productId:null!==(t=e.productId)&&void 0!==t?t:"",description:null!==(a=e.description)&&void 0!==a?a:"",quantity:Number(e.quantity)||1,unit:null!==(i=e.unit)&&void 0!==i?i:"pcs",unitPrice:Number(e.unitPrice)||0,discount:Number(e.discount)||0,taxRate:Number(e.taxRate)||0}})})}},[N,O]);let calculateDueDate=(e,t)=>{if(!e)return"";let a=new Date(e);switch(t){case"due_on_receipt":break;case"net_7":a.setDate(a.getDate()+7);break;case"net_15":a.setDate(a.getDate()+15);break;case"net_30":a.setDate(a.getDate()+30);break;case"net_60":a.setDate(a.getDate()+60)}return a.toISOString().split("T")[0]},calculateItemTotals=e=>{let t=e.unitPrice*e.quantity*e.discount/100,a=e.unitPrice*e.quantity-t,i=a*e.taxRate/100;return{discountAmount:t,taxAmount:i,lineTotal:a+i}},handleProductChange=(e,t)=>{let a=S.find(e=>e.id===t);a&&(X("items.".concat(e,".productId"),a.id),X("items.".concat(e,".description"),a.name),X("items.".concat(e,".unitPrice"),a.sellingPrice),X("items.".concat(e,".unit"),a.unit||"pcs"),X("items.".concat(e,".taxRate"),a.taxRate||0))},onSubmit=async e=>{try{let t={...e,issueDate:new Date(e.issueDate).toISOString(),dueDate:calculateDueDate(e.issueDate,e.paymentTerms)};(null==N?void 0:N.id)?(await R("/api/invoices/".concat(N.id),t),r.Am.success("Invoice updated successfully")):(await q("/api/invoices",t),r.Am.success("Invoice created successfully")),I()}catch(e){r.Am.error((null==e?void 0:e.message)||"Failed to save invoice")}};if(w)return(0,i.jsx)("div",{children:"Loading..."});let $=calculateDueDate(Y,W),ee=(p=0,b=0,y=0,J.forEach(e=>{let t=calculateItemTotals(e);p+=e.unitPrice*e.quantity,y+=t.discountAmount,b+=t.taxAmount}),{subTotal:p,taxTotal:b,discountTotal:y,totalAmount:p-y+b});return(0,i.jsxs)("form",{onSubmit:Z(onSubmit),className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Customer"}),(0,i.jsx)(f,{isClearable:!0,isDisabled:!!N,value:(()=>{let e=K("customerName"),t=A.find(t=>t.name===e);return t?{value:t.id,label:t.name}:e?{value:"new",label:e}:null})(),onChange:e=>{if(!e){X("customerName",""),X("customerEmail","");return}let t=A.find(t=>t.id===e.value);t?(X("customerName",t.name,{shouldDirty:!0}),X("customerEmail",t.email||"",{shouldDirty:!0})):(X("customerName",e.label,{shouldDirty:!0}),X("customerEmail","",{shouldDirty:!0}))},options:A.map(e=>({value:e.id,label:e.name})),placeholder:"Select or type a customer"}),B.customerName&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:B.customerName.message})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Customer Email"}),(0,i.jsx)(v.I,{...L("customerEmail"),placeholder:"Enter customer email",disabled:!!N||!!A.find(e=>e.name===K("customerName")),error:null===(t=B.customerEmail)||void 0===t?void 0:t.message})]}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Invoice Type"}),(0,i.jsxs)(c.Ph,{value:K("type"),onValueChange:e=>X("type",e),children:[(0,i.jsx)(c.i4,{children:(0,i.jsx)(c.ki,{placeholder:"Select invoice type"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"standard",children:"Standard"}),(0,i.jsx)(c.Ql,{value:"proforma",children:"Proforma"}),(0,i.jsx)(c.Ql,{value:"credit",children:"Credit Note"}),(0,i.jsx)(c.Ql,{value:"debit",children:"Debit Note"})]})]}),B.type&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:B.type.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsx)(v.I,{label:"Issue Date",type:"date",...L("issueDate"),error:null===(a=B.issueDate)||void 0===a?void 0:a.message,disabled:V}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Payment Terms"}),(0,i.jsxs)(c.Ph,{value:W,onValueChange:e=>X("paymentTerms",e),children:[(0,i.jsx)(c.i4,{children:(0,i.jsx)(c.ki,{placeholder:"Select payment terms"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"due_on_receipt",children:"Due on Receipt"}),(0,i.jsx)(c.Ql,{value:"net_7",children:"Net 7"}),(0,i.jsx)(c.Ql,{value:"net_15",children:"Net 15"}),(0,i.jsx)(c.Ql,{value:"net_30",children:"Net 30"}),(0,i.jsx)(c.Ql,{value:"net_60",children:"Net 60"})]})]}),B.paymentTerms&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:B.paymentTerms.message})]}),(0,i.jsx)(v.I,{label:"Due Date",type:"date",value:$,disabled:!0,className:"bg-gray-50"})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Items ",S.length]}),G.map((e,t)=>{var a,s,l,n,r,d,o,u,x,h,p,j,b,y,f,N,D,I,C,A,_,P,w,k,T;return(0,i.jsxs)("div",{className:"border rounded-lg p-4 mb-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,i.jsxs)("div",{className:"md:col-span-4 flex flex-col",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1",children:"Product"}),(0,i.jsxs)(c.Ph,{value:(null===(a=J[t])||void 0===a?void 0:a.productId)||((null===(s=J[t])||void 0===s?void 0:s.productId)===""?"custom":null===(l=J[t])||void 0===l?void 0:l.productId),onValueChange:e=>handleProductChange(t,e),children:[(0,i.jsx)(c.i4,{children:(0,i.jsx)(c.ki,{placeholder:"Select Product"})}),(0,i.jsxs)(c.Bw,{children:[(0,i.jsx)(c.Ql,{value:"custom",children:"Custom Item"}),S.map(e=>(0,i.jsx)(c.Ql,{value:e.id,children:e.name},e.id))]})]}),(null===(r=B.items)||void 0===r?void 0:null===(n=r[t])||void 0===n?void 0:n.productId)&&(0,i.jsx)("p",{className:"text-red-500 text-sm mt-1",children:null===(o=B.items[t])||void 0===o?void 0:null===(d=o.productId)||void 0===d?void 0:d.message})]}),(0,i.jsx)("div",{className:"md:col-span-4",children:(0,i.jsx)(v.I,{label:"Description",...L("items.".concat(t,".description")),error:null===(h=B.items)||void 0===h?void 0:null===(x=h[t])||void 0===x?void 0:null===(u=x.description)||void 0===u?void 0:u.message,disabled:V})}),(0,i.jsx)("div",{className:"md:col-span-2",children:(0,i.jsx)(v.I,{label:"Quantity",type:"number",step:"0.01",...L("items.".concat(t,".quantity"),{valueAsNumber:!0}),error:null===(b=B.items)||void 0===b?void 0:null===(j=b[t])||void 0===j?void 0:null===(p=j.quantity)||void 0===p?void 0:p.message,disabled:V})}),(0,i.jsx)("div",{className:"md:col-span-2",children:(0,i.jsx)(v.I,{label:"Unit",...L("items.".concat(t,".unit")),error:null===(N=B.items)||void 0===N?void 0:null===(f=N[t])||void 0===f?void 0:null===(y=f.unit)||void 0===y?void 0:y.message,disabled:V})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mt-4",children:[(0,i.jsx)("div",{className:"md:col-span-3",children:(0,i.jsx)(v.I,{label:"Unit Price (₹)",type:"number",step:"0.01",...L("items.".concat(t,".unitPrice"),{valueAsNumber:!0}),error:null===(C=B.items)||void 0===C?void 0:null===(I=C[t])||void 0===I?void 0:null===(D=I.unitPrice)||void 0===D?void 0:D.message,disabled:V})}),(0,i.jsx)("div",{className:"md:col-span-2",children:(0,i.jsx)(v.I,{label:"Discount (%)",type:"number",step:"0.01",...L("items.".concat(t,".discount"),{valueAsNumber:!0}),error:null===(P=B.items)||void 0===P?void 0:null===(_=P[t])||void 0===_?void 0:null===(A=_.discount)||void 0===A?void 0:A.message,disabled:V})}),(0,i.jsx)("div",{className:"md:col-span-2",children:(0,i.jsx)(v.I,{label:"Tax Rate (%)",type:"number",step:"0.01",...L("items.".concat(t,".taxRate"),{valueAsNumber:!0}),error:null===(T=B.items)||void 0===T?void 0:null===(k=T[t])||void 0===k?void 0:null===(w=k.taxRate)||void 0===w?void 0:w.message,disabled:V})}),(0,i.jsx)("div",{className:"md:col-span-3",children:(0,i.jsx)(v.I,{label:"Line Total (₹)",type:"number",value:calculateItemTotals(J[t]).lineTotal.toFixed(2),disabled:!0,className:"bg-gray-50"})}),(0,i.jsx)("div",{className:"md:col-span-2 flex items-end",children:G.length>1&&(0,i.jsx)(m.z,{type:"button",variant:"danger",onClick:()=>H(t),disabled:V,className:"w-full",children:(0,i.jsx)(g.Z,{size:16})})})]})]},e.id)}),(0,i.jsxs)(m.z,{type:"button",variant:"outline",onClick:()=>M({productId:"",description:"",quantity:1,unit:"pcs",unitPrice:0,discount:0,taxRate:0}),disabled:V,className:"mt-2",children:[(0,i.jsx)(j.Z,{size:16,className:"mr-2"}),"Add Item"]})]}),(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Invoice Summary"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 max-w-md ml-auto",children:[(0,i.jsx)("div",{className:"text-right",children:"Subtotal:"}),(0,i.jsxs)("div",{className:"text-right font-medium",children:["₹",ee.subTotal.toFixed(2)]}),(0,i.jsx)("div",{className:"text-right",children:"Discount:"}),(0,i.jsxs)("div",{className:"text-right font-medium text-red-600",children:["-₹",ee.discountTotal.toFixed(2)]}),(0,i.jsx)("div",{className:"text-right",children:"Tax:"}),(0,i.jsxs)("div",{className:"text-right font-medium",children:["+₹",ee.taxTotal.toFixed(2)]}),(0,i.jsx)("div",{className:"text-right border-t pt-2 font-semibold",children:"Total:"}),(0,i.jsxs)("div",{className:"text-right border-t pt-2 font-semibold",children:["₹",ee.totalAmount.toFixed(2)]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,i.jsx)(v.I,{label:"Shipping Address",...L("shippingAddress"),error:null===(l=B.shippingAddress)||void 0===l?void 0:l.message,disabled:V}),(0,i.jsx)(v.I,{label:"Billing Address",...L("billingAddress"),error:null===(d=B.billingAddress)||void 0===d?void 0:d.message,disabled:V}),(0,i.jsx)(v.I,{label:"Terms & Conditions",...L("termsAndConditions"),error:null===(o=B.termsAndConditions)||void 0===o?void 0:o.message,disabled:V}),(0,i.jsx)(v.I,{label:"Notes",...L("notes"),error:null===(u=B.notes)||void 0===u?void 0:u.message,disabled:V})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,i.jsx)(m.z,{type:"button",variant:"outline",onClick:C,disabled:V,children:"Cancel"}),(0,i.jsx)(m.z,{type:"submit",isLoading:V,children:N?"Update Invoice":"Create Invoice"})]})]})},I=a(7050),invoices=()=>{let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[v,x]=(0,s.useState)(0),handleCloseForm=()=>{t(!1),o(null)};return(0,i.jsx)(l.Z,{children:(0,i.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Invoices"}),(0,i.jsx)(m.z,{onClick:()=>t(!0),children:"Create Invoice"})]}),(0,i.jsx)(invoices_InvoiceList,{onEditInvoice:e=>{o(e),t(!0)},onViewInvoice:e=>{u(e),n(!0)},refreshKey:v}),(0,i.jsx)(I.u,{isOpen:e,onClose:handleCloseForm,title:d?"Edit Invoice":"Create Invoice",size:"xl",children:(0,i.jsx)(invoices_InvoiceForm,{invoice:d,onSuccess:()=>{r.Am.success("Invoice saved successfully ✅"),handleCloseForm(),x(e=>e+1)},onCancel:handleCloseForm})})]})})}}},function(e){e.O(0,[2138,9226,9496,731,8126,467,7240,5516,7578,3707,7951,7302,2968,6324,7737,6051,3957,4812,5323,747,6753,8870,5041,6026,5429,8498,4942,5702,8922,8510,8424,553,7226,269,6611,5341,5111,8592,2888,179],function(){return e(e.s=93969)}),_N_E=e.O()}]);